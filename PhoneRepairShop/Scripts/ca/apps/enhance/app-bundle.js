define("apps/enhance/controls/control-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true})});define("apps/enhance/controls/converters/meta-converter",["require","exports","tslib","aurelia-framework","./number-editor"],function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(){}e.prototype.toView=function(e,t,i){if(!t&&i&&i.allowNull&&!e){return i.nullText}return e!=null?e.toString():""};e.prototype.fromView=function(e,t,i){return e};return e}();t.TextEditorValueConverter=n;var s=function(){function e(e,t){this.text=e;this.numb=t}e.prototype.toView=function(e,t,i,r){var a=this[t];return a&&a.toView?a.toView(e,i,r):e};e.prototype.fromView=function(e,t,i,r){var a=this[t];return a&&a.fromView?a.fromView(e,i,r):e};e=i.__decorate([r.autoinject,i.__metadata("design:paramtypes",[n,a.NumberEditorValueConverter])],e);return e}();t.MetaValueConverter=s});define("apps/enhance/controls/converters/number-editor",["require","exports","tslib","aurelia-framework","../../services/control-helper"],function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(){this.minusSymbol="-";this.dotSymbol=".";this.decimalSeparator=".";this.groupSeparator=",";this.getDecimals=function(e){return e.decimals<0?0:e.decimals};var e=a.numberFormatInfo;if(e){this.minusSymbol=e.negativeSign;this.decimalSeparator=e.number.decimalSeparator;this.groupSeparator=e.number.groupSeparator}}e.prototype.toView=function(e,t,i){if(i==null){return""}if(!t&&i.allowNull&&e==null){return i.nullText}if(!i.allowNull&&e==null){e=0}if(!i.enabled||i.readOnly){t=false}var r=t?i.editFormat:i.displayFormat;if(r){return e.format(r,a.numberFormatInfo)}return t?this.getEditText(e,i):this.getDisplayText(e,i)};e.prototype.fromView=function(e,t,i){return this.checkLimits(this.parseValue(e,i),i)};e.prototype.getEditText=function(e,t){var i;try{i=e.toFixed(this.getDecimals(t))}catch(e){i=(0).toFixed(this.getDecimals(t))}return i.replace(this.dotSymbol,this.decimalSeparator)};e.prototype.getDisplayText=function(e,t){var i=e.toLocaleString("en-US",{minimumFractionDigits:this.getDecimals(t)});i=i.replace(/,/g,this.groupSeparator);return i.replace(this.dotSymbol,this.decimalSeparator)};e.prototype.checkLimits=function(e,t){if(e!=null&&!isNaN(e)){var i=t.minValue;var r=t.maxValue;if(i!=null&&e<i){return i}if(r!=null&&e>r){return r}}return e};e.prototype.parseValue=function(e,t){var i=0;var r="";if(this.decimalSeparator!==" "){e=e.replace(/\s/g,"")}else{e=e.replace(/[\t\n\r\f]/g,"")}for(var n=0;n<e.length;n++){var s=e.charAt(n);if(a.isDigit(s)||s===this.minusSymbol){r+=s}else if(s===this.decimalSeparator||s===this.dotSymbol&&this.groupSeparator!==this.dotSymbol){r+=this.dotSymbol}}i=this.parseFloat(r);return isNaN(i)?0:Number(i.toFixed(this.getDecimals(t)))};e.prototype.parseFloat=function(e){var t=e.length;var i=e.indexOf(this.decimalSeparator);var r=14;if(i<0){i=e.indexOf(this.dotSymbol)}if(i>=0){t=i}if(t>r){var a=t-r;return parseFloat(e.substr(a))}return parseFloat(e)};e=i.__decorate([r.autoinject,i.__metadata("design:paramtypes",[])],e);return e}();t.NumberEditorValueConverter=n});define("apps/enhance/controls/index",["require","exports","./qp-number-editor","./qp-calendar","./qp-datetime-edit","./qp-text-editor"],function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});function s(e){e.globalResources([n.QpTextEditorCustomElement,i.QpNumberEditorCustomElement,r.QpCalendarCustomElement,a.QpDatetimeEditCustomElement,"./converters/meta-converter"])}t.configure=s});define("apps/enhance/controls/qp-calendar",["require","exports","tslib","aurelia-framework","aurelia-logging"],function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=a.getLogger("qp-calendar");var s=function(){function e(){}e.prototype.toView=function(e){return e==null?"":e.toString()};e.prototype.fromView=function(e){return parseInt(e)};return e}();t.StringToIntValueConverter=s;var o=7;var l=12;var u=864e5;var c=4;var h=6;var f=function(){function e(e){this.elem=e;this.required=false;this.year=NaN;this.month=NaN;this.monthNames=[];this.shortMonthNames=[];this.shortDayNames=[];this.yearFix=0;this.firstDayOfWeek=0;this.locale="en-US";this.enableMonthChange=true;n.info("constructor",this.config&&this.config.id);this.formats={showDOWHeader:true,showOtherMonthDays:true,showWeekNumber:true,nextPrevFormat:0};this.todayDate=new Date;this.todayString=this.todayDateToString()}t=e;Object.defineProperty(e.prototype,"monthPanel",{get:function(){return y(new Date(this.year,this.month,1),this.firstDayOfWeek)},enumerable:true,configurable:true});e.prototype.selectTheDate=function(e,t){this.value=e;this.syncMonthYear();this.monthPaneEle&&this.monthPaneEle.focus();this.commitSelection(this.value);t&&t.stopPropagation();return false};e.prototype.syncMonthYear=function(){if(this.value instanceof Date){this.month=this.value.getMonth();this.year=this.value.getFullYear()}else{this.month=this.todayDate.getMonth();this.year=this.todayDate.getFullYear()}};e.prototype.commitSelection=function(e){var t=new CustomEvent("valuechanged",{bubbles:true,detail:{value:this.value}});this.elem.dispatchEvent(t)};e.prototype.monthChanged=function(e){this.renderHintsToPrevNextMonths(e)};e.prototype.attached=function(){n.info("attached() of ",this.config&&this.config.id);var e=r.PLATFORM.global.top._dateFormatInfo;if(e){this.monthNames=e.monthNames.split(",");this.shortMonthNames=e.abbrMonthNames.split(",");this.shortDayNames=e.abbrDayNames.split(",");this.yearFix=e.yearFix?e.yearFix:0}else{this.monthNames=t._MN;this.shortMonthNames=t._SMN;this.shortDayNames=t._SDN}var i=r.PLATFORM.global.top.__PXCalendar;if(i){this.firstDayOfWeek=i.firstDayOfWeek}this.syncMonthYear();this.renderHintsToPrevNextMonths(this.month);this.monthPaneEle&&this.monthPaneEle.focus()};e.prototype.configChanged=function(e,t){n.info("configChanged() of ",e,t);if(this.config){if(this.config.todayDate)this.todayDate=this.config.todayDate;if(this.config.todayString)this.todayString=this.config.todayString}this.syncMonthYear()};e.prototype.keyDown=function(e){n.info(e.key+" pressed");var t=true;switch(e.key){case"Down":case"ArrowDown":this.advanceDate(0,0,o);break;case"Up":case"ArrowUp":this.advanceDate(0,0,-o);break;case"Right":case"ArrowRight":this.advanceDate(0,0,1);break;case"Left":case"ArrowLeft":this.advanceDate(0,0,-1);break;case"PageUp":this.advanceDate(0,-1,0);break;case"PageDown":this.advanceDate(0,1,0);break;case"Home":this.advanceDate(-1,0,0);break;case"End":this.advanceDate(1,0,0);break;case"Space":this.value=this.todayDate;this.syncMonthYear();break;case"Enter":this.commitSelection(this.value);break;case"Esc":case"Escape":this.commitSelection(undefined);break;default:t=false}if(t){e.stopPropagation();return false}return true};e.prototype.advanceDate=function(e,t,i){if(this.value instanceof Date){this.value=new Date(this.value.getFullYear()+e,this.value.getMonth()+t,this.value.getDate()+i);this.syncMonthYear()}};e.prototype.todayDateToString=function(){return Intl.DateTimeFormat(this.locale).format(this.todayDate)};e.prototype.renderHintsToPrevNextMonths=function(e){var t=(l+e-1)%l;var i=(l+e+1)%l;if(this.prevMonthEle){px.setTitle(this.prevMonthEle,this.monthNames[t])}if(this.nextMonthEle){px.setTitle(this.nextMonthEle,this.monthNames[i])}};e.prototype.handleMonthChange=function(e){this.month+=e;if(this.month<0){this.month=l-1;this.year--}else if(this.month>=l){this.month=0;this.year++}};e.prototype.isTheSame=function(e,t){if(e instanceof Date&&t instanceof Date&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()){return true}return false};e.prototype.isWeekend=function(e){var t=e.getDay();if(t===0||t===o-1){return true}return false};e.prototype.getWeekNumber=function(e){if(e===undefined||e.length<o){return 0}var t=e[c].date;if(t===undefined){return 0}var i=new Date(t.getFullYear(),t.getMonth(),t.getDate());var r=i.getDay();i.setDate(i.getDate()-(r+o-1)%o+c-1);var a=i.valueOf();i.setMonth(0);i.setDate(c);return Math.round((a-i.valueOf())/(o*u))+1};var t;e._nextPrevShortMonth=1;e._nextPrevFullMonth=2;e._daysInWeek=7;e._MN=["January","February","March","April","May","June","July","August","September","October","November","December"];e._SMN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e._SDN=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];e._selectMode=0;e._addSelectionMode=1;e._rangeSelectionMode=2;i.__decorate([r.computedFrom("year","month"),i.__metadata("design:type",Array),i.__metadata("design:paramtypes",[])],e.prototype,"monthPanel",null);i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"config",void 0);i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"value",void 0);i.__decorate([r.observable,i.__metadata("design:type",Number)],e.prototype,"month",void 0);e=t=i.__decorate([r.autoinject,r.customElement("qp-calendar"),i.__metadata("design:paramtypes",[Element])],e);return e}();t.QpCalendarCustomElement=f;function p(e){return new Date(e.getFullYear(),e.getMonth())}function d(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function g(e){return new Date(e.getFullYear(),e.getMonth(),0)}function v(e,t){var i=[];var r=p(e);var a=r.getDay();var n=(a-t+o)%o;var s=g(r);var l=s.getDate();for(var u=l-n+1;u<=l;++u){i.push({dayOfMonth:u,leadingDay:true,date:new Date(s.getFullYear(),s.getMonth(),u)})}return i}function m(e,t){var i=[];var r=(t+o-1)%o;var a=d(e);var n=a.getDay();var s=(r-n+o)%o;for(var l=1;l<=s;++l){i.push({dayOfMonth:l,trailingDay:true,date:new Date(a.getFullYear(),a.getMonth()+1,l)})}return i}function b(e,t){var i=[];var r=(t+o-1)%o;var a=d(e);var n=a.getDay();var s=(r-n+o)%o;for(var l=s+1;l<=s+o;++l){i.push({dayOfMonth:l,trailingDay:true,date:new Date(a.getFullYear(),a.getMonth()+1,l)})}return i}function y(e,t){var i=[];var r=d(e).getDate();var a=v(e,t);for(var n=1;n<=r;++n){a.push({dayOfMonth:n,inCurrentMonth:true,date:new Date(e.getFullYear(),e.getMonth(),n)});if(a.length===o){i.push(a);a=[]}}a=a.concat(m(e,t));if(a.length>0){i.push(a)}if(i.length<h){i.push(b(e,t))}return i}});define("text!apps/enhance/controls/qp-calendar.html",[],function(){return'<template><require from="./qp-calendar"></require><table class="calendar" cellpadding="0" cellspacing="0" style="z-index:11000" click.delegate="$event.stopPropagation()"><tbody><tr><td class="calendarMT"><table cellpadding="0" cellspacing="0" border="0" style="height:100%;width:100%"><tbody><tr><td class="calendarNP" click.delegate="handleMonthChange(-1)" ref="prevMonthEle"><div class="sprite-icon control-icon" icon="PrevMonth"><div class="control-icon-img control-PrevMonth"></div></div></td><td style="text-align:Center"><select ref="monthSelEle" value.bind="month | stringToInt"><option repeat.for="i of 12" value.one-time="i">${monthNames[i]}</option></select> <select ref="yearSelEle" value.bind="year | stringToInt"><option repeat.for="i of 11" value="${year+i-5}">${year+i-5}</option></select></td><td class="calendarNP" click.delegate="handleMonthChange(1)" ref="nextMonthEle"><div class="sprite-icon control-icon" icon="NextMonth"><div class="control-icon-img control-NextMonth"></div></div></td></tr></tbody></table></td></tr><tr><td><table cellspacing="0" align="Center" border="0" style="width:100%" ref="monthPaneEle" keydown.capture="keyDown($event)" tabindex="0"><colgroup><col repeat.for="i of 8" style="width:12%"></colgroup><tbody><tr><td class="calendarDH">#</td><td class="calendarDH" repeat.for="i of 7">${shortDayNames[(i+firstDayOfWeek)%7]}</td></tr><tr repeat.for="week of monthPanel"><td class="calendarWN calendarD">${getWeekNumber(week)}</td><td repeat.for="day of week" class="calendarD ${isTheSame(day.date, todayDate) ? \'calendarTD\' : \'\'} ${day.trailingDay || day.leadingDay ? \'calendarOMD\' : \'\'} ${isWeekend(day.date) ? \'calendarWE\':\'\'} ${isTheSame(day.date, value) ? \'calendarSD\':\'\'}" click.capture="selectTheDate(day.date, $event)">${day.dayOfMonth}</td></tr></tbody></table></td></tr><tr><td ref="todayCellEle" class="calendarF" style="cursor:pointer" click.delegate="selectTheDate(todayDate)"> ${todayString} </td></tr></tbody></table></template>'});define("apps/enhance/controls/qp-datetime-edit",["require","exports","tslib","aurelia-framework","../services/control-helper","aurelia-logging"],function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var s=n.getLogger("qp-datetime-edit");var o=29;var l=1900;var u=9999;var c=12;var h=31;var f=127;var p="0".charCodeAt(0);var d="9".charCodeAt(0);var g=0;var v=1;var m=2;var b=function(){function e(e,t){this.wrapper=e;this.todayDate=new Date;this.readOnly=false;this.durationMode=false;this.fullDOW=false;this.fullMonth=false;this.selectOnFocus=false;this.allowStrings=false;this.roundUpTime=false;this.required=false;this.hideEnterKey=false;this.promptChar="_";this.emptyChar=" ";this.valueMode=0;this.validateExp="";this.asciiCharSet=false;this.dropDownOpen=false;this.inlineEditor=false;this.outerClickSubscription=undefined;this.allowRepaintText=true;this.hasFocus=false;this.lockMouseUp=false;this.mouseClicked=false;this.trackSelection=true;this.trackPosition=false;this.selStart=0;this.selEnd=0;this.field0ID=new Array;this.field1ID=new Array;this.mask=undefined;this.maskExclude=undefined;this.maskInclude=undefined;this.emptyText=undefined;this.AM="AM";this.PM="PM";this.lengthAmPm=this.AM.length>this.PM.length?this.AM.length:this.PM.length;this.yearFix=0;this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December",""];this.dowNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];this.validateEdit=true;this.eventManager=t}t=e;e.createDate=function(e,t,i){var r=new Date(e,t,i);r.setFullYear(e,t,i);return r};e._trimEnd=function(e){return e.replace(/\s+$/,"")};e._filter=function(e,t,i,r,a,n){if(i>=t.length)return r;var s=t.charCodeAt(i);var o=t.charAt(i);if(s<21||a&&a.indexOf(o)!==-1)return r;if(n&&n.indexOf(o)!==-1)return o;var l=Math.floor((e-1)/6);switch(l){case 0:break;case 1:if(s>=p&&s<=d)return o;case 2:if(s>255||o.toUpperCase()!==o.toLowerCase())break;return r;case 3:return s>=p&&s<=d?o:r}e=Math.floor((e-1)/2)%3;if(e===0)return o;o=e===2?o.toLowerCase():o.toUpperCase();if(a&&a.indexOf(o)!==-1)return r;return o};e.format=function(e,i,r,a){if(a==null)a=0;if(i==null)i="";var n="";var s;var o=0;var l=t.split(e);var u=l[0];var c=l[1];var h=l[2];for(var f=0;f<u.length;f++){s=u.charCodeAt(f);if(s<21){var p=void 0;if(o<i.length){p=t._filter(s,i,o,"",c,h);o++}n+=p?p:r}else{n+=u.charAt(f);if(a>0)o++}}return n};e.encode=function(e){var i;var r;var a=0;var n="";var s=t.split(e);var o=s[0];var l=s[1];var u=s[2];for(var c=0;c<o.length;c++){r=o.charAt(c);i=t._flag(r,a);if(i!==0){if(i<0){a=a===-i?0:-i;continue}n+=String.fromCharCode(i)}else if(r==="\\"&&c+1<o.length){r=o.charAt(c+1);if(t._flag(r,0)!==0){n+=r;c++}}else n+=r}if(l)n+="|"+l;if(u){if(!l)n+="|";n+="|"+u}return n};e.split=function(e){var t=e.split("|");if(t.length===1)t[v]="";if(t.length===2)t[m]="";return t};e._flag=function(e,t){var i=0;switch(e){case">":return-1;case"<":return-2;case"&":i=1;break;case"C":i=2;break;case"A":i=7;break;case"a":i=8;break;case"L":i=13;break;case"?":i=14;break;case"#":case"0":return 19;case"9":return 20;default:return 0}return i+t*2};Object.defineProperty(e.prototype,"isEditLink",{get:function(){return false},enumerable:true,configurable:true});e.prototype.acceptDateFromCalendar=function(e){s.info("acceptDateFromCalendar");var t=e.detail&&e.detail.value;if(t)this.setValue(t);this.dropDownOpen=false;this.elemText.focus();e.preventDefault();e.stopPropagation();this.fireEvent("valuechanged")};e.prototype.configChanged=function(e,a){s.info("configChanged() of ",e,a);if(a===undefined){Object.assign(e,t.defaultConfig,i.__assign({},e))}var n=r.PLATFORM.global.top._dateFormatInfo;this.AM=n.am||"AM";this.PM=n.pm||"PM";this.lengthAmPm=Math.max(this.AM.length,this.PM.length);this.yearFix=n.yearFix||0;this.monthNames=this.fullMonth?n.monthNames.split(","):n.abbrMonthNames.split(",");this.dowNames=this.fullDOW?n.dayNames.split(","):n.abbrDayNames.split(",");this._initializeMask()};e.prototype.attached=function(){this.trange=new _(this.elemText)};e.prototype.getValue=function(e){if(e===void 0){e=false}if(this.value===undefined||e){var t=this._getTypedValue(this.elemText.value,true);if(this.allowStrings||t instanceof Date&&!isNaN(t.getTime()))this.value=t}return this.value};e.prototype.getValueOrToday=function(){var e=this.getValue(true);if(e==null)e=new Date;return e};e.prototype.setValue=function(e){var t=this._parseInvariant(e);if(this.allowStrings||t instanceof Date&&!isNaN(t.getTime())&&a.equals(this._checkLimits(t),t)){this.value=this.oldValue=t;if(this.hasFocus){this.elemText.value=this.getEditText(this.value);if(a.isVisible(this.elemText))this.select(this.selStart)}else this.elemText.value=this.getDisplayText(this.value)}};e.prototype.valueChanged=function(){if(this.hasFocus){this.elemText.value=this.getEditText(this.value);if(a.isVisible(this.elemText)){this.trange&&this.trange.refreshSelection()}}else this.elemText.value=this.getDisplayText(this.value)};e.prototype.updateValue=function(e){var t=e===undefined?this.getValue(true):e;if(!a.equals(t,this.oldValue)){var i=this.fireEvent("valuechanging");if(i){this.setValue(this.oldValue);return false}var r=new Object;var n=this.oldValue;e!==undefined?this.setValue(t):this.repaintText(t);this.oldValue=t;this.fireEvent("valuechanged");return true}};e.prototype.getReadOnly=function(){return this.readOnly};e.prototype.setReadOnly=function(e){e=Boolean(e);if(this.readOnly!==e)this.readOnly=e};e.prototype.getEnabled=function(){return this.elemText.getAttribute==null||!this.elemText.getAttribute("enabled")};e.prototype.getDisabled=function(){return!this.getEnabled()||this.getReadOnly()};e.prototype.doTrackSelection=function(){if(this.elemText.tagName==="INPUT"&&this.trackSelection||this.trackPosition){this.getSelectedText()}};e.prototype.selectContent=function(e){var t=this;if(e===void 0){e=true}if(!a.isVisible(this.elemText))return;if((this.selectOnFocus||this.getDisabled())&&this.elemText.select){this.select();this.lockMouseUp=true;if(this.mouseClicked&&a.browser.isEdge)setTimeout(function(){t.select()},0)}else if(this.elemText.tagName==="INPUT"||this.trackPosition){var i=e?this.selStart:0;var r=e?this.selEnd:0;if(a.browser.isIE)this.select(i,r);else setTimeout(function(){t.select(i,r)},0)}};e.prototype.processFocus=function(e){this.hasFocus=true;this.oldValue=this.getValue();if(!this.getDisabled()&&this.allowRepaintText&&!this.isEditLink){var t=this.getEditText(this.getValue());if(this.elemText.value!==t)this.elemText.value=t}this.selectContent(this.trackPosition);this.getSelectedText();if(this.allowRepaintText)this.fireEvent("activated")};e.prototype.processBlur=function(e){this.hasFocus=false;this.onBlur(e);if(this.allowRepaintText&&!this.isEditLink){this.updateValue();var t=this.getDisplayText(this.getValue());if(t!==this.elemText.value)this.elemText.value=t}};e.prototype.onBlur=function(e){if(this.allowStrings||this.getDisabled())return;var i=this.elemText.value;var r=this._fields1(i,true);var a=this.separate(i);if(this.emptyText!==i&&r.some(function(e){return!e})){var n=new Date;if(this.roundUpTime){n.setHours(23);n.setMinutes(59);n.setSeconds(59);n.setMilliseconds(999)}else{n.setHours(0);n.setMinutes(0);n.setSeconds(0);n.setMilliseconds(0)}for(var s=0;s<r.length;s++){var o=r[s];if(this._isDatePart(s)&&!o){r[s]=this._fieldValue(this.field0ID[s],n,true,"0")}else if(t.between(10,this.field0ID[s],13)&&!o&&!this.isZeroTime(r,a,s)){r[s]=n.getHours()}else if(t.between(16,this.field0ID[s],17)&&!o&&!this.isZeroTime(r,a,s)){r[s]=n.getMinutes()}}var l=function(e,t,i){return e.some(function(e){return e>=t&&e<=i})};var u=this.getMergedDateTime(r.slice());if(u!==undefined){if(!l(this.field0ID,10,13))u.setHours(n.getHours());if(!l(this.field0ID,16,17))u.setMinutes(n.getMinutes());if(!l(this.field0ID,18,19))u.setSeconds(n.getSeconds());if(!l(this.field0ID,22,28))u.setMilliseconds(n.getMilliseconds());this.elemText.value=this.getEditText(u)}}};e.prototype.processKeyDown=function(e){this.doTrackSelection();switch(e.key){case"Backspace":if(this.getReadOnly()){e.preventDefault();e.stopPropagation()}break;case"Esc":case"Escape":e.preventDefault();break;case"Enter":if(!e.shiftKey){if(this.hideEnterKey){e.preventDefault();e.stopPropagation()}if(this.allowRepaintText){this.updateValue()}}break}if(!this.onKeyDown(e)){e.preventDefault();e.stopPropagation();return false}switch(e.key){case"Backspace":case"Delete":case"Del":if(this.getDisabled()){e.preventDefault();e.stopPropagation();break}if(a.browser.isAnyIE||a.browser.isSafari||a.browser.isFirefoxFrom65){if(!this.onKeyPress(e)){e.preventDefault();e.stopPropagation()}}break}return true};e.prototype.onButtonClick=function(e){if(this.dropDownOpen){this.hideDropDown();this.focus()}else this.showDropDown()};e.prototype.onKeyDown=function(e){var t=!(e.ctrlKey||e.metaKey||e.altKey);switch(e.key){case"Down":case"ArrowDown":case"-":case"F3":if(!this.config.timeMode&&(e.key==="F3"||e.altKey)){this.onButtonClick();return false}if(e.key!=="F3"&&!e.shiftKey&&!this.inlineEditor&&!this.allowStrings){this.incrementActivePart(-1);return false}break;case"Up":case"ArrowUp":case"+":if(t&&!this.inlineEditor&&!this.allowStrings){this.incrementActivePart(1);return false}break;case"Right":case"ArrowRight":if(t&&!e.shiftKey&&!this.allowStrings){this.selectActivePart(this.getActivePartIndex()+1);return false}break;case"Left":case"ArrowLeft":if(t&&!e.shiftKey&&!this.allowStrings){this.selectActivePart(this.getActivePartIndex()-1);return false}break;case".":case"/":if(t&&!this.allowStrings){if(e.shiftKey){this.selectActivePart(this.getActivePartIndex()-1)}else{this.selectActivePart(this.getActivePartIndex()+1)}return false}break}return true};e.prototype.processKeyPress=function(e){this.doTrackSelection();if(this.getDisabled()){if(!e.ctrlKey){e.preventDefault();e.stopPropagation();return}}this.onKeyPress(e)};e.prototype.onKeyPress=function(e){if(!this.mask||!this.validateEdit)return true;var t=this.elemText.value;var i=t.length;var r=this.selStart;var a=this.selEnd;var n=this.emptyChar.charCodeAt(0);if(r!==a){while(--a>=r){var s=this.promptChar;if(this.mask.charCodeAt(a)>=21)s=this.mask.charAt(a);t=t.substring(0,a)+s+t.substring(a+1)}a++}else{switch(e.key){case"Del":case"Delete":case"Space":while(a<i&&this.mask.charCodeAt(a)>=21)a++;if(a>=i)return false;t=t.substring(0,a)+this.promptChar+t.substring(a+1);a++;break;case"Backspace":while(a>0&&this.mask.charCodeAt(a-1)>=21)a--;if(a--<1)return false;t=t.substring(0,a)+this.promptChar+t.substring(a+1)}}if(e.key.length===1&&e.key!==" "&&a<i){var o=e.key.toUpperCase();var l=[t];r=this.insertCharAt(l,o,a);t=l[0];if(r<0)return false;a=this.locatePromptPos(r)}this.elemText.value=t;this.select(a);this.fireEvent("usertyping");return false};e.prototype.processBeforePaste=function(e){e.returnValue=false};e.prototype.processSelectStart=function(e){if(!this.selectOnFocus){e.preventDefault();e.stopPropagation()}};e.prototype.processInput=function(e){if(a.isVisible(this.elemText))this.fireEvent("usertyping")};e.prototype.processPaste=function(e){if(this.getDisabled()){e.preventDefault();e.stopPropagation();return false}var t=e.clipboardData;if(t!=null){var i=t.getData("Text");var r=this.text;var a=this.processPasteValue(i);if(i&&(!a||r!==this.text))this.fireEvent("usertyping");if(a){e.preventDefault();e.stopPropagation()}}else this.fireEvent("usertyping");return true};e.prototype.initInlineEditor=function(e){this.config=e.config;this._initializeMask()};e.prototype.repaintText=function(e){var t=this.hasFocus?this.getEditText(e):this.getDisplayText(e);if(t!==this.text)this.text=t};e.prototype.getDisplayText=function(e){if(this.config.allowNull&&e==null)return this.config.nullText;return this._getFormattedText(e,false)};e.prototype.getEditText=function(e){return this._getFormattedText(e,true)};e.prototype.getText=function(){return this.elemText.value};e.prototype.setText=function(e){var i=e?t._trimEnd(e):"";this.elemText.value=i};e.prototype.getVisible=function(){return this.elemText.style.display!=="none"};e.prototype.select=function(e,t){if(this.getVisible()&&this.trange){this.trange.select(e,t);this.selStart=this.trange.selStart;this.selEnd=this.trange.selEnd}};e.prototype.getSelectedText=function(){if(!this.trange)return"";var e=this.trange.getSelectedText();this.selStart=this.trange.selStart;this.selEnd=this.trange.selEnd;return e};e.prototype.fireEvent=function(e,t){var i={};switch(e){case"keydown":case"keypress":case"keyup":var r=t;if(r&&r.key)i.key=r.key;break;case"valuechanging":i.oldValue=this.oldValue;i.value=this.getValue();break;case"valuechanged":i.value=this.getValue();break}var a=new CustomEvent(e,{bubbles:true,detail:i});this.elemText.dispatchEvent(a);if(a.detail.cancel===true)return true;return false};e.prototype._getFormattedText=function(e,t){if(this.allowStrings&&!(e instanceof Date)){return e!=null?e.toString():""}if(e==null||e===""||e instanceof String)return this.getDisplayValue("",1);var i="";var r=t?this.mask||"":this.mask1;var a=t?this.field0ID:this.field1ID;var n;var s;var o=-1;var l=0;while(++o<r.length){n=r.charAt(o);s=r.charCodeAt(o);if(s<21){i+=this._fieldValue(a[l++],e,t,n);if(t){while(o+1<r.length){if(r.charCodeAt(o+1)===s)o++;else break}}}else i+=n}return t?this.getDisplayValue(i,1):i};e.prototype.focus=function(){try{this.elemText.focus()}catch(e){}};e.prototype.validateValue=function(e){if(this.isNullValue(e)){e=this.config.allowNull?undefined:""}else if(this.validateExp){var t=new RegExp(this.validateExp);var i=t.exec(e||"");if(i!=null)e=i[0];else e=this.config.allowNull?undefined:""}if(this.asciiCharSet&&e){var r=e;e="";for(var a=0;a<r.length;a++){if(r.charCodeAt(a)<f)e+=r.charAt(a)}}return e};e.prototype._initializeMask=function(){this.mask0=this._dateMask(this.config.editMask,false);this.mask1=this._dateMask(this.config.displayMask,true);this._initEmptyText();this.setInputMask(this.mask0)};e.prototype._initEmptyText=function(){this.emptyText=this.mask0.replace(/[#LC]/g,this.promptChar)};e.prototype._setAllowStrings=function(e){this.allowStrings=!(e instanceof Date);this.validateEdit=!this.allowStrings};e.prototype._dateMask=function(e,t){if(t){if(this.field1ID==null)this.field1ID=new Array;this.field1ID.length=0}else{if(this.field0ID==null)this.field0ID=new Array;this.field0ID.length=0}if(e==null)e="";var i;var r;var a=0;var n=-1;var s="";for(r=0;r<e.length;r++){i=e.charCodeAt(r);if(i<p||i>d){var o=e.charAt(r);if(t&&o==="\\"&&r+1<e.length){i=i=e.charAt(++r);if(i==="\\")continue;if("0"===i||"9"===i)s+=o;s+=i}else s+=o;continue}n=(i-p)*10+e.charCodeAt(++r)-p;if(t){this.field1ID[a++]=n;s+=""}else{this.field0ID[a++]=n;switch(n){case 14:s+="L";break;case 15:s+=Array(this.lengthAmPm+1).join("C");break;case 22:s+="#";break;default:s+="##";if(n===3)s+="##";while(n-- >23)s+="#"}}}return s};e.prototype.setInputMask=function(e){if(e==null)e="";if(this.rawMask===e)return;var i=this.mask?this.calculateValue(this.getText(),0,1):undefined;this.maskFull=t.encode(e);var r=t.split(this.maskFull);this.mask=r[g];this.maskExclude=r[v];this.maskInclude=r[m];if(i!=null){this.setText(this.getDisplayValue(i,0));this.value=undefined}this.rawMask=e};e.prototype.calculateValue=function(e,i,r){if(this.isNullValue(e))return this.config.allowNull?undefined:"";if(!this.mask)return e;var a=new RegExp("\\"+this.promptChar,"g");e=e.toString().replace(a,String.fromCharCode(0));var n=0;var s;var o;var l=true;var u="";for(var c=0;c<this.mask.length;c++){o=this.mask.charCodeAt(c);if(o<21){s=undefined;if(n<e.length){s=t._filter(o,e,n,"",this.maskExclude,this.maskInclude);n++}u+=s?s:this.emptyChar;if(s)l=false}else{if(r>0&&n<e.length){if(this.mask.charAt(c)!==e.charAt(n))return undefined;n++}if(i>0)u+=this.mask.charAt(c)}}return l?this.config.allowNull?undefined:"":t._trimEnd(u)};e.prototype.isNullValue=function(e){var t=String(e);if(e===undefined||t==="")return true;if(this.config.allowNull&&t===this.config.nullText)return true;return false};e.prototype.getDisplayValue=function(e,i,r){if(this.mask){if(r===undefined)r=this.promptChar;return t.format(this.maskFull,e,r,i)}return e!=null?e:""};e.prototype._fieldValue=function(e,t,i,r){var a;var n=(e&1)*2;if(e<4){a=t.getFullYear()+this.yearFix;if(e===3)n=4;else{a%=100;n=e===2?2:0}}else if(e<8){a=t.getMonth()+1;if(e>5){var s=this.monthNames[a-1];if(s.length>0)return s}}else if(e<10){a=t.getDate()}else if(e<16){a=t.getHours();if(e>13){var o=a<12?this.AM:this.PM;e-=13;n=o.length;if(e===n)return o;if(n<e)o+=" ";return e===1?o.substring(0,e):o}if(e<12){a%=12;if(a===0)a=12}}else if(e<18)a=t.getMinutes();else if(e<20)a=t.getSeconds();else if(e<22)return this.dowNames[t.getDay()];else{a=t.getMilliseconds();var l=n=e-21;while(l-- >3)a*=10;while(l++<2)a=Math.floor(a/10)}var u=a.toString();if(e<20){e=u.length;if(i){if(n===0)n=2;else i=false}if(n>0){if(n<e)u=u.substring(0,n);else while(e++<n)u=(i?r:"0")+u}}return u};e.prototype._checkLimits=function(e){if(!this.config.timeMode&&!this.allowStrings&&e!=null&&!isNaN(e.getTime())){var t=e.getTime();var i=void 0;var r=void 0;if(this.config.minValue!=null)i=this.config.minValue.getTime();if(this.config.maxValue!=null)r=this.config.maxValue.getTime();if(i!==undefined&&t<i){e=new Date(i)}if(r!==undefined&&t>r){e=new Date(r)}}return e};e.prototype._parseInvariant=function(e){var i=new Date;if(e===undefined||this.isNullValue(e)){if(this.config.allowNull)return undefined}else{if(e instanceof Date)i=e;else{if(this.config.timeMode||e.indexOf(":")>0){var r=Date.parse(e);if(!isNaN(r))i=new Date(r)}else{var a=e.split("/");if(a.length>=3){var n=parseInt(a[2]);var s=parseInt(a[0]);var o=parseInt(a[1]);if(!isNaN(n)&&!isNaN(s)&&!isNaN(o))i=t.createDate(n,s-1,o)}}}}if(this.config.timeMode&&!isNaN(i.getTime())){i.setFullYear(l);i.setMonth(0);if(!this.durationMode)i.setDate(1)}if(this.config.allowCustomItems)this._setAllowStrings(i);if(this.allowStrings&&(i===undefined||isNaN(i.getTime())))return e;return i};e.prototype._getTypedValue=function(e,t){var i;if(this.isNullValue(e)||e===this.emptyText){if(this.config.allowNull)return undefined;i=new Date}else{if(e instanceof Date)i=e;else{i=this._parseText(e,this.hasFocus,t);if(isNaN(i.getTime()))i=this._parseText(e,!this.hasFocus,t)}}if(this.config.timeMode&&!isNaN(i.getTime())){i.setFullYear(1900);i.setMonth(0);if(!this.durationMode)i.setDate(1)}if(this.config.allowCustomItems)this._setAllowStrings(i);if(this.allowStrings&&(i===undefined||isNaN(i.getTime())))return e;return t?this._checkLimits(i):i};e.prototype._parseText=function(e,t,i){var r=this._fields1(e,t);var a=0;var n=r.length;var s=-1;var l=-1;var u=-1;var c=-1;var h=-1;var f=-1;var p=-1;var d=-1;var g=-1;while(++g<n){var v=r[g];var m=t?this.field0ID[g]:this.field1ID[g];if(m<4){if(v>100&&v>this.yearFix)v-=this.yearFix;if(v<0)a++;else{s=v;var b=o;if(v<100){if(m<3&&b<0)b=29;if(b>=0)s+=v>b?1900:2e3}}}else if(m<8){if(v<1||v>12)a++;else l=v}else if(m<10){if(v<1||v>31)a++;else u=v}else if(m<14){if(v===24)v=0;if(m>11)d=-4;else{if(v===12)v=0;if(v>12)a++}if(v>23)a++;else c=v}else if(m<16){if(v>0)d++;continue}else if(m<18){if(v>59)a++;else h=v}else if(m<20){if(v>59)a++;else f=v}else if(m<22){continue}else{while(m++<24)v*=10;while(m-- >25)v=Math.floor(v/10);p=v}}if(d===0&&c>=0&&c<12)c+=12;var y=new Date(NaN);if(a===0){if(s>0&&l>0){y=new Date(s,l-1);y.setFullYear(s,l-1)}else y=new Date;if(y!=null){if(l>0)y.setMonth(l-1);if(u>0)y.setDate(u);y.setHours(c>=0?c:0);y.setMinutes(h>=0?h:0);y.setSeconds(f>=0?f:0);y.setMilliseconds(p>=0?p:0);if(s>0&&l>0&&u>0)y.setFullYear(s,l-1,u)}if(i)y=this._checkLimits(y)}return y};e.prototype._fields1=function(e,t){var i=t&&!this.getDisabled()?this.field0ID:this.field1ID;var r=i.length;var a=-1;var n=0;var s=0;var o=new Array(r);while(++a<r)o[a]=-1;if(e==null)return o;e=e.toUpperCase();a=-1;while(++a<e.length&&s<r){var l=e.charCodeAt(a)-48;var u=i[s];if(e.charAt(a)===this.promptChar)continue;if(20===u||21===u){u=i[++s]}if(14===u||15===u){if(l>=0&&l<=9){n=-1;s++;a--;continue}if(this.PM.charAt(0).toUpperCase()===e.charAt(a)){o[s++]=1;n=-1}}else if(u===6||u===7){n=-1;while(n-- >-3){for(l=0;l<12;l++){var c=this.monthNames[l].toUpperCase();u=c.length;if(u<1)continue;if(n===-3){if(u<4)continue;c=c.substring(0,3)}u=e.indexOf(c)-1;if(u>-2){if(u<0||e.charAt(u).toLowerCase()===e.charAt(u))break}}if(l<12){o[s]=l+1;break}}s++}else{if(l>=0&&l<=9){if(n<=0)n=l;else n=n*10+l}else if(n>=0){o[s++]=n;n=0}}}if(s<r)o[s]=n;return o};e.between=function(e,t,i){return e<=t&&i>=t};e.prototype.getMergedDateTime=function(e){var i=function(e){return e[0].toUpperCase()+e.substring(1).toLowerCase()};var r=-1;var a=-1;var n=-1;var s=0;var o=0;var l=0;var u=0;var c=-1;for(var h=0;h<e.length;h++){var f=e[h];var p=f;var d=f;if(d==null)d=parseInt(p,10);var g=this.field0ID[h];switch(g){case 1:case 2:case 3:r=d;break;case 4:case 5:a=d;break;case 6:case 7:a=this.monthNames.indexOf(i(p));break;case 8:case 9:n=d;break;case 10:case 11:case 12:case 13:s=d;break;case 14:case 15:c=p===this.PM?1:0;break;case 16:case 17:o=d;break;case 18:case 19:l=d;break;case 22:case 23:case 24:case 25:case 26:case 27:case 28:u=d;break}}if(c===0){if(s===12)s=0}else if(c===1){if(s>12)s+=12}var v=function(e){if(e%4)return false;if(e%100)return true;if(e%400)return false;return true};var m=1582;var b=275760;var y=false;if(t.between(m,r,b)&&t.between(1,a,12)){var x=31;switch(a){case 2:x=v(r)?29:28;break;case 4:case 6:case 9:case 11:x=30}if(t.between(1,n,x)){y=true}}var _=t.between(0,s,23)&&t.between(0,o,60)&&t.between(0,l,60)&&t.between(0,u,9999);if(y&&_)return new Date(r,a-1,n,s,o,l,u)};e.prototype._isDatePart=function(e){return this.field0ID[e]<10};e.prototype.isZeroTime=function(e,i,r){var a=e[r];if(a===0){var n=this.field0ID[r];var s=t.between(10,n,13)||t.between(16,n,28);if(s){var o=Array.prototype.slice.call(i[r]);while(o.length&&o[0]===this.promptChar)o.shift();o.reverse();while(o.length&&o[0]===this.promptChar)o.shift();o.reverse();return 0===parseInt(o.join(),10)}}return false};e.prototype.processPasteValue=function(e){if(!this.mask)return false;this.getSelectedText();var t=this.selStart;var i=this.selEnd;var r=this.elemText.value;r=this.clearMaskedContent(r,t,i);var a=[r];var n=t;for(var s=0;s<e.length;s++){if(this.mask.charCodeAt(n)<=20&&e.charAt(s)===this.promptChar){n++;continue}n=this.insertCharAt(a,e.charAt(s),n);if(n<0||n>=this.mask.length)break}this.elemText.value=a[0];this.select(i>0?i:t);return true};e.prototype.clearMaskedContent=function(e,t,i){if(!this.mask)return e;if(t==null||t<0)t=0;if(i==null||i>this.mask.length)i=this.mask.length;if(t>i){var r=i;i=t;t=r}if(t!==i){while(--i>=t){var a=this.promptChar;if(this.mask.charCodeAt(i)>=21)a=this.mask.charAt(i);e=e.substring(0,i)+a+e.substring(i+1)}i++}return e};e.prototype.separate=function(e){var t=function(e){return"\\/.:- ".indexOf(e)>-1};var i=function(e){var i=[];for(var r=0;r<e.length;r++){if(t(e[r]))i.push(r)}return i};var r=function(e,t,i,r){for(var a=0,n=r;a<n.length;a++){var s=n[a];var o=e.substr(t-s,i.length);if(o===i)return true}return false};var a=i(this.AM);var n=i(this.PM);var s=new Array;var o="";for(var l=0;l<e.length;l++){var u=e[l];if(t(u)&&!(r(e,l,this.AM,a)||r(e,l,this.PM,n))){s.push(o);o=""}else o+=u}if(o!=="")s.push(o);return s};e.prototype.getPartCount=function(e){return this.separate(e).length};e.prototype.getActivePartIndex=function(){var e=this.trange&&this.trange.selEnd;var t=this.getText().substring(0,e);return this.getPartCount(t)-1};e.prototype.getPartLen=function(e){return this.separate(this.config.editMask)[e].length};e.prototype.selectActivePart=function(e){if(this.getDisabled())return;var t=function(e){return e.reduce(function(e,t){return e+t.length+1},0)};var i=this.getText();var r=this.getPartCount(i);if(e>=0&&e<r){var a=this.separate(i);var n=t(a.slice(0,e));var s=t(a.slice(0,e+1));if(s>0)s--;this.trange&&this.trange.select(n,s)}};e.prototype.incrementActivePart=function(e){if(this.getDisabled()||!this.trange)return;var t=this.trange.selStart;var i=this.trange.selEnd;var r=this.getActivePartIndex();if(!this.field0ID)return;var a=this.field0ID[this.getActivePartIndex()];var n=this.getValue(true);if(!n)n=new Date;switch(a){case 1:case 2:case 3:n.setFullYear(n.getFullYear()+e);break;case 4:case 5:case 6:case 7:n.setMonth(n.getMonth()+e);break;case 8:case 9:n.setDate(n.getDate()+e);break;case 10:case 11:case 12:case 13:n.setHours(n.getHours()+e);break;case 16:case 17:n.setMinutes(n.getMinutes()+e);break;case 18:case 19:n.setSeconds(n.getSeconds()+e);break}this.elemText.value=this.getEditText(n);this.fireEvent("usertyping");this.trange.select(t,i)};e.prototype.locatePromptPos=function(e,t){if(t===void 0){t=false}var i=this.mask?this.mask.length:0;while(e>=0&&e<i&&this.mask&&this.mask.charCodeAt(e)>=21){if(t)e--;else e++}return e};e.prototype.insertCharAt=function(e,i,r){if(!this.mask)return-1;var a=this.mask.length;var n=r;var s=e[0];if(r<a){if(this.__checkField){var o=new x;o.txt=s;n=this.__checkField(i.charCodeAt(0),i,s,r,o);if(n>=0){s=o.txt;e[0]=s;return n}else return-1}else{if(this.mask.charCodeAt(n)>=21&&this.mask.charAt(n)===i)return++n;while(this.mask.charCodeAt(n)>=21)if(++n>=a)return-1;var l=t._filter(this.mask.charCodeAt(n),i,0,undefined,this.maskExclude,this.maskInclude);if(l===undefined){return-1}i=l;s=s.substring(0,n)+i+s.substring(n+1);e[0]=s;n++;return n}}return-1};e.prototype.__checkField=function(e,t,i,r,a){var n=i.length;var s=new y;var o=0;var l=this._curField(r,s);if(!this.mask)return-1;if(t===this.mask.charAt(r))return++r;if(r>=s.n1){r--;if(i.charAt(r)!==this.promptChar){return this.__checkField(e,t,i,r+2,a)}}if(l<0)return-1;if(l===5){if(r<s.n1){var u=this.PM;if(u.charAt(0).toUpperCase()!==t.toUpperCase())u=this.AM;if(s.n1===s.n0+1)u=u.charAt(0);else{n=u.length;if(n<this.lengthAmPm)u+=" ";else if(n>this.lengthAmPm)u=u.substring(0,this.lengthAmPm)}a.txt=i.substring(0,s.n0)+u+i.substring(s.n1)}return s.n1}if(e<48||e>57){if(e===46||e===58){r=s.n1;while(++r<n)if(this.mask.charCodeAt(r)<21)break;return r}return-1}e-=48;if(s.n0===r){var u=i.charAt(r+1)===this.promptChar?0:i.charCodeAt(r+1)-48;switch(l){case 4:e--;u-=2;case 3:case 1:if(e>1)o=1;else if(e===1&&u>2)o=2;break;case 2:if(e>3)o=1;else if(e===3&&u>1)o=2;break;case 6:case 7:if(e>5)o=1;break}}if(s.n0+1===r){var u=i.charAt(r-1)===this.promptChar?0:i.charCodeAt(r-1)-48;switch(l){case 4:u--;e-=2;case 3:case 1:if(u>1||u===1&&e>2)o=3;break;case 2:if(u>3||u===3&&e>1)o=3;break;case 6:case 7:if(u>6||u===6&&e>0)o=3;break}}if(o===1){i=i.substring(0,r)+this.promptChar+i.substring(r+1);r++}if(o===2){i=i.substring(0,r+1)+this.promptChar+i.substring(r+2)}if(o===3){while(++r<n)if(this.mask.charCodeAt(r)<21)break;if(r>=n)return-1;return this.__checkField(e+48,t,i,r,a)}a.txt=i.substring(0,r)+t+i.substring(r+1);return++r};e.prototype._curField=function(e,t){if(!this.mask)return-1;var i;var r=22;var a=t.n0=t.n1=-1;var n=0;for(;n<this.mask.length;n++){i=this.mask.charCodeAt(n);if(i>21===r>21){continue}if(i>21){if(n>=e)break}else{t.n0=n;a++}r=i}if(t.n0>=0)t.n1=n;a=this.field0ID[a];if(a==null)return-1;if(a<8)return a<4?0:1;if(a<20)return Math.floor((a-4)/2);return a>21?8:-1};e.prototype.toggleCalendar=function(e){this.dropDownOpen?this.hideDropDown():this.showDropDown();e.stopPropagation();return false};e.prototype.showDropDown=function(){var e=this;this.dropDownOpen=true;this.outerClickSubscription=this.eventManager.addEventListener(document.body,"click",function(t){return e.handleOuterClick(t)},r.delegationStrategy.bubbling,true)};e.prototype.hideDropDown=function(){if(!this.dropDownOpen)return;this.dropDownOpen=false;if(this.outerClickSubscription)this.outerClickSubscription.dispose();this.outerClickSubscription=undefined};e.prototype.handleOuterClick=function(e){if(!e)return true;this.hideDropDown();return true};var t;e.defaultConfig={nullText:"",allowNull:true,allowCustomItems:false,minValue:new Date(l,0,1),maxValue:new Date(u,c-1,h),timeMode:false};i.__decorate([r.computedFrom("enabled","readOnly","linkCommand.command"),i.__metadata("design:type",Boolean),i.__metadata("design:paramtypes",[])],e.prototype,"isEditLink",null);i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"config",void 0);i.__decorate([r.bindable({defaultBindingMode:r.bindingMode.twoWay}),i.__metadata("design:type",Object)],e.prototype,"value",void 0);e=t=i.__decorate([r.autoinject,r.customElement("qp-datetime-edit"),i.__metadata("design:paramtypes",[Element,r.EventManager])],e);return e}();t.QpDatetimeEditCustomElement=b;var y=function(){function e(){this.n0=-1;this.n1=-1}return e}();var x=function(){function e(){}return e}();var _=function(){function e(e){this.element=e;this.selStart=0;this.selEnd=0}e.prototype.refreshSelection=function(){var e=this.element;e.selectionStart=this.selStart;e.selectionEnd=this.selEnd};e.prototype.select=function(e,t){var i=this.element;var r=i.value.length;if(e===undefined||e<0){e=0;t=r}else if(t===undefined){t=e}if(t>=r)t=r;else if(t<e)t=e;if(e>t)e=t;this.selStart=e;this.selEnd=t;if(i.selectionStart!=null){if(e===0&&t===r)i.select();else{i.selectionStart=e;i.selectionEnd=t}}else i.select()};e.prototype.getSelectedText=function(){var e="";var t=this.element;this.selStart=this.selEnd=0;if(t.selectionStart!=null&&t.selectionEnd!=null){this.selStart=t.selectionStart;this.selEnd=t.selectionEnd;if(this.selStart<this.selEnd){e=t.value.substring(this.selStart,this.selEnd)}}return e};return e}();t.TextRange=_});define("text!apps/enhance/controls/qp-datetime-edit.html",[],function(){return'<template css="display: ${config.hidden ? \'none\': \'block\'};"><div id="${config.id}" class="dropDown size-s ${hasFocus ? \'focus\' : \'\'}"><div class="editorCont"><div class="editorWrap"><input id="${config.id}_text" ref="elemText" name="${config.name}$text" type="text" tabindex="${config.tabIndex}" class="editor" keydown.delegate="processKeyDown($event)" keypress.delegate="processKeyPress($event)" focus.capture="processFocus($event)" blur.capture="processBlur($event)" beforepaste.delegate="processBeforePaste($event)" paste.delegate="processPaste($event)" selectstart.delegate="processSelectStart($event)" input.delegate="processInput($event)"></div></div><div class="buttonsCont" click.delegate="toggleCalendar($event)"><span class="center"></span><div class="sprite-icon control-icon" icon="DropDownN" type="sel"><div class="control-icon-img control-DropDownN"></div></div></div></div><qp-calendar if.bind="dropDownOpen" ref="elemCalendar" glue-to.bind="elemText" style="background-color:#fff;z-index:1000" value.to-view="getValueOrToday()" valuechanged.delegate="acceptDateFromCalendar($event)"></template>'});define("apps/enhance/controls/qp-number-editor",["require","exports","tslib","aurelia-framework","aurelia-logging","../services/control-helper","./converters/number-editor","./qp-text-editor"],function(e,t,i,r,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});var l=a.getLogger("number-editor");var u=function(e){i.__extends(t,e);function t(t,i){var r=e.call(this,t,i)||this;r.element=t;r.tq=i;r.maxDecimals=null;r.conv=new s.NumberEditorValueConverter;r.converter="numb";return r}a=t;t.prototype.configChanged=function(e,t){if(t===undefined){Object.assign(e,a.defaultConfig,a.defaultConfigN,i.__assign({},e))}};t.prototype.getDecimals=function(){return this.conv.getDecimals(this.config)};t.prototype.isMinus=function(e){var t=45;return e===this.conv.minusSymbol.charCodeAt(0)||e===t};t.prototype.sendInputEvent=function(){var e=document.createEvent("HTMLEvents");e.initEvent("input",true,true);this.elemText.dispatchEvent(e)};t.prototype.processPasteValue=function(e){var t=e&&e.trim();var i=this.elemText.value;var r=new String(i);var a=this.elemText.selectionStart||0;var n=this.elemText.selectionEnd||0;t=t.replace(new RegExp(this.conv.groupSeparator,"g"),"");t=t.replace(new RegExp(" ","g"),"");t=t.replace(new RegExp("s","g"),"");t=t.replace(this.conv.decimalSeparator,this.conv.dotSymbol);t=t.replace(/\+/,"");var s=t.search(/[^0-9.\-]/);if(s>=0){return true}if(a!==0&&t.search(/[\-\+]/)>=0){return true}if(a>=0){i=i.substring(0,a)+t+i.substring(n)}else{i=t}var o=this.conv.parseValue(i,this.config);if(!isNaN(o)&&this.conv.checkLimits(o,this.config)===o){this.elemText.value=this.conv.getEditText(o,this.config)}else{this.elemText.value=r.toString()}this.sendInputEvent();return true};t.prototype.onKeyPress=function(e,t){var i=7;var r=8;var a=32;var s=15;if(t<i||t>r&&t<a){return false}var o=this.elemText.value;var l=o.length;var u=this.elemText.selectionStart||0;var c=this.elemText.selectionEnd||0;if(u!==c){o=o.substring(0,u)+o.substring(c);c=u;l=o.length}else if(t===i||t===r){return true}var h=0;var f=l;var p=false;if(this.config.editFormat){var d="";var g=void 0;for(var v=0;v<o.length;v++){g=o.charAt(v);if(n.isDigit(g)||g===this.conv.minusSymbol){d+=g}else if(g===this.conv.decimalSeparator){d+=this.conv.dotSymbol}else{l--;if(v<u){u--}if(v<c){c--;h++}}}o=d}if(t===this.conv.dotSymbol.charCodeAt(0)){t=this.conv.decimalSeparator.charCodeAt(0)}var m=o.indexOf(this.conv.decimalSeparator);if(t>r&&(!this.config.maxLength||this.config.maxLength<=0||this.config.maxLength>l)){var b=t===this.conv.decimalSeparator.charCodeAt(0);var y=n.isDigit(t)||b&&this.getDecimals()>0||u===0&&this.isMinus(t)&&this.config.minValue<0;if(!y){return false}if(l>0&&u===0&&this.isMinus(o.charCodeAt(0))){return false}if(b){if(m>=0){if(m===u||m===u-1){return false}l--;if(m<u){u=--c}o=o.substring(0,m)+o.substring(m+1)}if(l-u>this.getDecimals()){return false}}else if(this.getDecimals()>0&&m>=0){var x=l-m-1;if(x===this.getDecimals()&&u>m){p=true}}var _=String.fromCharCode(t);if(c>=l){if(p){o=o.substring(0,l-1)}o+=_}else{var w=p?c+1:c;o=o.substring(0,u)+_+o.substring(w)}}var k=o.length;m=o.indexOf(this.conv.decimalSeparator);if(m>=0){k=m;if(this.maxDecimals){var D=parseInt(o.substring(m+1));if(D>this.maxDecimals){return false}}}if(k<s){if(this.config.editFormat){var E=this.conv.parseFloat(o);if(!isNaN(E)){o=E.format(this.config.editFormat,n.numberFormatInfo);h+=o.length-f-(p?0:1)}}this.elemText.value=o;this.select(c+1+h);this.sendInputEvent()}return false};var a;t.defaultConfigN={allowNull:false,decimals:0,maxValue:999999999999,minValue:-999999999999,valueType:n.NetType.Int32};i.__decorate([r.bindable,i.__metadata("design:type",Object)],t.prototype,"config",void 0);t=a=i.__decorate([r.autoinject,r.customElement("qp-number-editor-wrapper"),r.useView("./qp-text-editor.html"),i.__metadata("design:paramtypes",[Element,r.TaskQueue])],t);return t}(o.QpTextEditorCustomElement);t.QpNumberEditorCustomElement=u});define("apps/enhance/controls/qp-text-editor",["require","exports","tslib","aurelia-framework","aurelia-logging","../services/control-helper"],function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var s=a.getLogger("text-editor");var o=function(){function e(e,t){var i=this;this.element=e;this.tq=t;this.converter="text";this.hasFocus=false;this.getDisabled=function(){return!i.config.enabled||i.config.readOnly}}t=e;e.prototype.configChanged=function(e,r){if(r===undefined){Object.assign(e,t.defaultConfig,i.__assign({},e))}};e.prototype.select=function(e,t){if(e===void 0){e=null}if(t===void 0){t=null}if(!this.config.hidden){if(e==null||t==null){if(e!=null){this.elemText.setSelectionRange(e,e)}else{this.elemText.select()}}else{this.elemText.setSelectionRange(e,t)}}};e.prototype.selectContent=function(){var e=this;if(!n.isVisible(this.elemText)){return}if(this.config.selectOnFocus||this.getDisabled()){this.tq.queueTask(function(){return e.select()})}};e.prototype.processKeyDown=function(e){var t=127;var i=7;var r=8;var a=e.key.length===1&&!e.ctrlKey&&!e.metaKey&&!e.altKey;var n=a?e.key[0].charCodeAt(0):null;switch(e.key){case"Backspace":n=r;break;case"Delete":n=i;break}if(n!=null){if(this.getDisabled()||n>t&&this.config.asciiCharSet){return false}return this.onKeyPress(e,n)}return true};e.prototype.onKeyPress=function(e,t){return true};e.prototype.processFocus=function(e){this.hasFocus=true;this.selectContent()};e.prototype.processBlur=function(e){this.hasFocus=false};e.prototype.processPaste=function(e){if(this.getDisabled()){return false}var t=e.clipboardData?e.clipboardData:r.PLATFORM.global.clipboardData;if(t!=null){var i=t.getData("Text");if(this.processPasteValue(i)){return false}}return true};e.prototype.processPasteValue=function(e){return false};Object.defineProperty(e.prototype,"textMode",{get:function(){if(this.config==null){return"text"}switch(this.config.type){case 2:return"password";case 3:return"color"}return"text"},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"align",{get:function(){if(this.config==null){return""}switch(this.config.textAlign){case 1:return"left";case 2:return"center";case 3:return"right";case 4:return"justify"}return""},enumerable:true,configurable:true});var t;e.defaultConfig={allowNull:true,enabled:true,selectOnFocus:true,spellcheck:true,type:0};i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"config",void 0);i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"value",void 0);i.__decorate([r.bindable({defaultBindingMode:r.bindingMode.oneTime}),i.__metadata("design:type",String)],e.prototype,"converter",void 0);i.__decorate([r.computedFrom("config.type"),i.__metadata("design:type",String),i.__metadata("design:paramtypes",[])],e.prototype,"textMode",null);i.__decorate([r.computedFrom("config.textAlign"),i.__metadata("design:type",String),i.__metadata("design:paramtypes",[])],e.prototype,"align",null);e=t=i.__decorate([r.customElement("qp-text-editor-wrapper"),r.autoinject,i.__metadata("design:paramtypes",[Element,r.TaskQueue])],e);return e}();t.QpTextEditorCustomElement=o});define("text!apps/enhance/controls/qp-text-editor.html",[],function(){return'<template css="display: ${config.hidden ? \'none\': \'\'};"><template if.bind="config.hasEditLink && (!config.enabled || config.readOnly)"><a id="${config.id}" name="${config.name}" class="${config.class}" tabindex="${config.tabIndex}" href="javascript: void 0" css="text-align: ${align}" enabled.bind="enabled ? null : false & attr"> ${value | meta : converter : false : config} </a></template><template else><textarea if.bind="config.type == 1" id="${config.id}" ref="elemText" name="${config.name}" class="${config.class}" tabindex="${config.tabIndex}" maxlength.bind="config.maxLength & attr" enabled.bind="config.enabled ? null : false & attr" readonly="${config.readOnly || !config.enabled ? true : null}" spellcheck.bind="config.spellcheck ? null : false & attr" css="text-align: ${align}" wrap.bind="wrap ? \'off\': null & attr" rows.bind="config.rows" cols.bind="config.cols" value.bind="value | meta : converter : hasFocus : config & updateTrigger : \'blur\'" keydown.delegate="processKeyDown($event)" focus.trigger="processFocus($event)" blur.trigger="processBlur($event)" paste.delegate="processPaste($event)">\n    </textarea> <input if.bind="config.type != 1" type="${textMode}" id="${config.id}" ref="elemText" name="${config.name}" class="${config.class}" tabindex="${config.tabIndex}" maxlength.bind="config.maxLength & attr" enabled.bind="config.enabled ? null : false & attr" readonly="${config.readOnly || !config.enabled ? true : null}" spellcheck.bind="config.spellcheck ? null : false & attr" css="text-align: ${align}" value.bind="value | meta : converter : hasFocus : config & updateTrigger : \'blur\'" keydown.delegate="processKeyDown($event)" focus.trigger="processFocus($event)" blur.trigger="processBlur($event)" paste.delegate="processPaste($event)"></template></template>'});define("apps/enhance/main",["require","exports","tslib","aurelia-bootstrapper","aurelia-framework","environment","compatibility-layer/faux-screen","aurelia-binding"],function(e,t,i,r,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});n=i.__importDefault(n);o.disableConnectQueue();var l=function(e){var t=e instanceof Element&&e.getAttribute("id")||undefined;return{element:e,id:t}};var u=l(document.activeElement);if(u.element&&u.element.tagName==="BODY"){document.addEventListener("focus",function(e){u=l(e.target)},{capture:true,once:true})}var c=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,r,o;return i.__generator(this,function(i){switch(i.label){case 0:t=a.PLATFORM.global.globalControlsModules;e.use.basicConfiguration().defaultResources().globalResources([s.FauxScreenCustomAttribute]).plugin("aurelia-animator-css").feature("plugins/enhance-n-watch").feature("plugins/glue").feature("apps/enhance/controls");if(Array.isArray(t)){t.forEach(function(t){return e.use.feature(t)})}e.use.developmentLogging(n.default.debug?"debug":"warn");return[4,e.start()];case 1:i.sent();r={elements:{},values:{}};return[4,e.enhanceAndWatch(r)];case 2:i.sent();if(u.id){o=a.DOM.getElementById(u.id);if(o){o.focus()}}else if(u.element instanceof HTMLElement&&u.element.parentNode!=null){if(u.element!==document.activeElement){u.element.focus()}}if(a.PLATFORM.global.px_cm){px_cm.handleLoad();if(px_cm.requiredReloadPage(false))px_cm.reloadPage(true);px_cm.au_flush=function(){var t=e.container.get(a.TaskQueue);t.flushMicroTaskQueue()};px_cm.au_enhance=function(t){var i=e.container.get(a.TemplatingEngine);i.enhance({element:t,container:e.container,resources:e.resources,bindingContext:r});px_cm.au_flush()}}return[2]}})})};r.bootstrap(c)});define("apps/enhance/services/api-client",["require","exports","tslib","aurelia-fetch-client","aurelia-framework","whatwg-fetch","abortcontroller-polyfill/dist/abortcontroller-polyfill-only"],function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e){this.client=e;this.root="";this.root=requirejs.s.contexts._.config.baseUrl.replace("/scripts/ca/","");this.client.configure(function(e){e.withDefaults({headers:{Accept:"application/json","X-Requested-With":"Fetch"},credentials:"same-origin"})})}e.prototype.getBranchData=function(e,t){return this.client.fetch(this.root+"/ui/BranchSelector/Pass",{method:"POST",body:r.json(e),signal:t}).then(function(e){return e.json()})};e.prototype.getSuggestionData=function(e,t){return this.client.fetch(this.root+"/ui/Selector/GetSuggestions",{method:"POST",body:r.json(e),signal:t}).then(function(e){return e.json()})};e=i.__decorate([a.autoinject,i.__metadata("design:paramtypes",[r.HttpClient])],e);return e}();t.ApiClient=n});define("apps/enhance/services/control-helper",["require","exports","aurelia-pal"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(e==null&&t!=null||t==null&&e!=null){return false}if(e instanceof Date&&t instanceof Date){return e.getTime()===t.getTime()}return e===t}t.equals=r;var a=i.PLATFORM.global;var n;try{a=a.top;n=a.document}catch(e){a=i.PLATFORM.global}t.topWindow=a;t.topDocument=t.topWindow.document;t.numberFormatInfo=t.topWindow._numbFormatInfo;t.dateFormatInfo=t.topWindow._dateFormatInfo;function s(e){if(typeof e==="string"){e=e.charCodeAt(0)}var t=47;var i=58;return e>t&&e<i}t.isDigit=s;function o(){var e=window.__screenID;var t=window.location.pathname;if(e)e=e.replace(/\./g,"");else e=t.substr(t.lastIndexOf("/")+1).replace(".aspx","").toUpperCase();return e}t.getScreenID=o;function l(e){if(typeof e==="number"){e=String.fromCharCode(e)}var t=255;return e.charCodeAt(0)>t||e.toUpperCase()!==e.toLowerCase()}t.isLetter=l;function u(e){try{return e&&e.offsetParent!=null&&e.offsetWidth>0}catch(e){}return false}t.isVisible=u;var c=i.PLATFORM.global.navigator.userAgent.toLowerCase();var h=c.indexOf("msie")>=0;var f=c.indexOf("edge")>=0;var p=c.indexOf("rv:11.0")>0;var d=h||p;var g=c.indexOf("safari")>=0;var v=c.indexOf("firefox");var m=v>=0?parseFloat(c.substr(v+8,3)):0;var b=v>=0;var y=b&&m>=65;t.browser={isIE:h,isEdge:f,isIE11:p,isAnyIE:d,isSafari:g,isFirefox:b,isFirefoxFrom65:y};var x;(function(e){e[e["Empty"]=0]="Empty";e[e["Object"]=1]="Object";e[e["DBNull"]=2]="DBNull";e[e["Boolean"]=3]="Boolean";e[e["Char"]=4]="Char";e[e["SByte"]=5]="SByte";e[e["Byte"]=6]="Byte";e[e["Int16"]=7]="Int16";e[e["UInt16"]=8]="UInt16";e[e["Int32"]=9]="Int32";e[e["UInt32"]=10]="UInt32";e[e["Int64"]=11]="Int64";e[e["UInt64"]=12]="UInt64";e[e["Single"]=13]="Single";e[e["Double"]=14]="Double";e[e["Decimal"]=15]="Decimal";e[e["DateTime"]=16]="DateTime";e[e["String"]=18]="String"})(x=t.NetType||(t.NetType={}))});define("apps/enhance/services/localization",["require","exports","aurelia-pal"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});i.PLATFORM.global.ClientLocalizedStrings=i.PLATFORM.global.ClientLocalizedStrings||{};t.LOCALIZED_STRINGS=i.PLATFORM.global.ClientLocalizedStrings;t.default=t.LOCALIZED_STRINGS});define("apps/enhance/services/mark-highlights",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function i(e,t){if(!e){return[{highlight:false,text:t}]}var i=e.split(" ").filter(function(e){return e.length>0}).map(function(e){var t=e.toUpperCase();var i=t.length;return{str:t,len:i}});var r=t.toUpperCase();var a=Array.from({length:r.length});for(var n=0;n<a.length;n++){a[n]=false}var s=[];i.forEach(function(e){var t=0;var i=-1;do{i=r.indexOf(e.str,t);if(i>-1){for(var n=i;n<i+e.len;n++){a[n]=true}t=i+e.len}}while(i>-1)});var o=false;var l=0;do{var u=l;while(a[l]===o&&l<a.length){l++}if(l>u){s.push({highlight:o,text:t.substring(u,l)})}o=a[l]}while(l<a.length);return s}t.markHighlights=i});define("apps/enhance/services/suggestings-service",["require","exports","tslib","aurelia-framework","./api-client","./mark-highlights"],function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var s=2;var o=function(){function e(e,t){this.params=e;this.apiClient=t;this.results=new Map;this.baseQuery={args:e.args,fields:this.params.fields,filter:"",graph:this.params.graph,inlineArgs:this.params.inlineArgs,skip:0,take:this.params.pageSize,view:this.params.viewName}}e.prototype.abortRequest=function(){if(this.abortController){if(!this.abortController.signal.aborted){this.abortController.abort()}}};e.prototype.getSuggestions=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;var r=this;return i.__generator(this,function(a){if(!this.results.has(e)){t=i.__assign({},this.baseQuery,{filter:e},{take:this.params.pageSize*s});return[2,this.getData(t).then(function(a){if(a.haveMore){a.loadMore=function(){if(a.loading){return}a.loading=true;var e=i.__assign({},t,{skip:a.suggestionItems.length,take:r.params.pageSize});r.getData(e).then(function(e){var t;a.haveMore=e.haveMore;a.totalCount=e.totalCount;(t=a.suggestionItems).push.apply(t,e.suggestionItems);a.loading=false})}}r.results.set(e,a);return r.results.get(e)})]}return[2,Promise.resolve(this.results.get(e))]})})};e.prototype.getData=function(e){return i.__awaiter(this,void 0,void 0,function(){var t=this;return i.__generator(this,function(i){this.abortRequest();this.abortController=new AbortController;return[2,this.apiClient.getSuggestionData(e,this.abortController.signal).then(function(i){if(!i.data||!i.fields){return{haveMore:false,totalCount:0,suggestionItems:[],loading:false}}var r=i.fields.findIndex(function(e){return e.toLowerCase()===t.params.valueField.toLowerCase()});var a=i.fields.length>1&&t.params.descriptionName!==t.params.valueField?i.fields.findIndex(function(e){return e.toLowerCase()===(""+t.params.descriptionName).toLowerCase()}):-1;var s={haveMore:i.haveMore,loading:false,suggestionItems:i.data.map(function(t){var i=t[r];var s=a===-1?undefined:t[a];var o=n.markHighlights(e.filter,s?i+" - "+s:""+i);return{display:s,segments:o,value:i}}),totalCount:i.totalCount};return s})]})})};return e}();t.SuggestingsService=o;var l=function(){function e(e){this.apiClient=e}e.prototype.getSuggestingService=function(e){return new o(e,this.apiClient)};e=i.__decorate([r.autoinject,i.__metadata("design:paramtypes",[a.ApiClient])],e);return e}();t.SuggestingsServiceFabric=l});define("compatibility-layer/faux-object-factory",["require","exports","aurelia-logging","./faux-objects/text-editor","./faux-objects/faux-object","./faux-objects/calendar","./faux-objects/datetime-edit","./faux-objects/color-picker","./faux-objects/branch-selector","./faux-objects/number-editor"],function(e,t,i,r,a,n,s,o,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:true});var c=i.getLogger("object-proxy");var h={"qp-branch-selector":l.FauxObjectBranchSelector,"qp-color-picker":o.FauxObjectColorPicker,"qp-text-editor-wrapper":r.FauxObjectTextEditor,"qp-number-editor-wrapper":u.FauxObjectNumberEditor,"qp-calendar":n.FauxObjectCalendar,"qp-datetime-edit":s.FauxObjectDatetimeEdit};var f={get:function(e,t,i){var r=Reflect.get(e,t,i);c.info("proxy get",t,r);return r},set:function(e,t,i,r){var a=Reflect.set(e,t,i,r);c.info("proxy set",t,i,a);return a}};function p(e,t,i,r){var n=e.tagName.toLowerCase();var s=h[n]||a.FauxObjectBase;var o=new s(e,t,i,r);return o}t.getFauxObject=p});define("compatibility-layer/faux-objects/base-editor",["require","exports","tslib","aurelia-logging","compatibility-layer/faux-objects/faux-object","aurelia-framework"],function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var s=r.getLogger("base-editor");var o={dataField:null,enabled:true,readOnly:false,value:null};var l;(function(e){e["valueChanging"]="valueChanging";e["valueChanged"]="valueChanged"})(l||(l={}));var u=function(e){i.__extends(t,e);function t(t,i,r,n){var o=e.call(this,t,i,r)||this;o.element=t;o.screenValues=r;o.bindingEngine=n;o.enabled=true;o.readOnly=false;o.trackValue=true;o[a.propertySetters].set("readOnly",function(e){return o.setReadOnly(e)});o[a.propertySetters].set("enabled",function(e){return o.setEnabled(e)});o[a.propertySetters].set("value",function(e){return o.setValue(e)});o[a.configSetters].set("readOnly",null);o[a.configSetters].set("enabled",null);o.subscription=o.bindingEngine.propertyObserver(o.screenValues,o.ID).subscribe(function(e,t){if(o.trackValue){o.updateValueTimeout=setTimeout(function(){o.updateValue(e)},0);s.info("Observer value changed = "+t+" -> "+e)}});var u=o.getExternalProps();o.events.appendEvents([l.valueChanging,l.valueChanged],u?u.clientEvents:null);return o}t.prototype[a.initializeFauxObject]=function(){var t=this;e.prototype[a.initializeFauxObject].call(this);this.px_cm.setStackElements(this);this.saveTextElementRef();this.domEventsElem=new n.ElementEvents(this.element);this.domEventsElem.subscribe("input",function(){t.px_cm.notifyOwnerTyping(t)});this.domEventsElem.subscribe("focus",function(){t.px_cm.notifyOwnerActivate(t)})};t.prototype[a.disposeFauxObject]=function(){e.prototype[a.disposeFauxObject].call(this);this.domEventsElem.disposeAll();this.subscription.dispose()};t.prototype.saveTextElementRef=function(){this.elemText=this.elemFocus=this.getTextElement();if(this.elemText)this.setObjectRef(this.elemText)};t.prototype.getDefaultCallbackProps=function(){return i.__assign({},e.prototype.getDefaultCallbackProps.call(this),o)};t.prototype.updateValue=function(e){if(e===undefined){var t=this.getTextElement();if(t===n.PLATFORM.global.document.activeElement)t.blur();return false}if(e!==this.value){var i={oldValue:this.value,value:e};if(this.fireEvent(l.valueChanging,null,i)){this.setValue(this.value);return false}this.setValue(e);this.fireEvent(l.valueChanged,null,i);this.px_cm.notifyOwnerChanged(this);this.px_cm.processPostData(this)}return true};t.prototype.focus=function(){var e=this.getTextElement();try{e.focus()}catch(e){}};t.prototype.getTextElement=function(){return this.element.querySelector("input")};t.prototype.setVisible=function(t){e.prototype.setVisible.call(this,t);this.px_cm.setStackElementsVisible(this,t)};t.prototype.getEnabled=function(){return this[a.configRef].enabled};t.prototype.setEnabled=function(e){this.enabled=this[a.configRef].enabled=!!e};t.prototype.getReadOnly=function(){return this[a.configRef].readOnly};t.prototype.setReadOnly=function(e){this.readOnly=this[a.configRef].readOnly=!!e};t.prototype.getValue=function(){return this.screenValues[this[a.configRef].id]};t.prototype.setValue=function(e){var t=this;var i=this.trackValue;if(this.updateValueTimeout)clearTimeout(this.updateValueTimeout);this.trackValue=false;this.screenValues[this[a.configRef].id]=e;this.value=e;setTimeout(function(){return t.trackValue=i},0)};return t}(a.FauxObjectBase);t.FauxObjectBaseEditor=u});define("compatibility-layer/faux-objects/branch-selector",["require","exports","tslib","./base-editor","./faux-object"],function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(e){i.__extends(t,e);function t(t,i,r,n){var s=e.call(this,t,i,r,n)||this;s.autoCallBack=new a.CallbackSettings;s[a.propertySetters].set("branchName",function(e){return false});s[a.configSetters].set("value",function(e){return s.setValue(e)});return s}t.prototype[a.initializeFauxObject]=function(){e.prototype[a.initializeFauxObject].call(this)};t.prototype[a.disposeFauxObject]=function(){e.prototype[a.disposeFauxObject].call(this)};t.prototype.setValue=function(t){if(t instanceof Object){e.prototype.setValue.call(this,t)}else{if(this.screenValues[this[a.configRef].id]instanceof Object&&this.screenValues[this[a.configRef].id].id===t){return}var i={id:t,text:"no branch name"};e.prototype.setValue.call(this,i)}};t.prototype.setProperties=function(t){var r=t.branchName,a=t.value,n=i.__rest(t,["branchName","value"]);if(r&&a){n.value={id:a,text:r};e.prototype.setProperties.call(this,n)}else{e.prototype.setProperties.call(this,t)}};t.prototype.copyPropertiesToConfig=function(t){var r=t.branchName,a=t.value,n=i.__rest(t,["branchName","value"]);if(r&&a){n.value={id:a,text:r};e.prototype.copyPropertiesToConfig.call(this,n)}else{e.prototype.copyPropertiesToConfig.call(this,t)}};return t}(r.FauxObjectBaseEditor);t.FauxObjectBranchSelector=n});define("compatibility-layer/faux-objects/calendar",["require","exports","tslib","./faux-object","aurelia-framework"],function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(e){i.__extends(t,e);function t(t,i,r){return e.call(this,t,i,r)||this}t.prototype[r.initializeFauxObject]=function(){var t=this;e.prototype[r.initializeFauxObject].call(this);var i=this.element;this.domEvents=new a.ElementEvents(i);this.domEvents.subscribe("valuechanged",function(){px_cm.notifyOwnerChanged(t);px_cm.processPostData(t)})};t.prototype[r.disposeFauxObject]=function(){e.prototype[r.disposeFauxObject].call(this);this.domEvents.disposeAll()};return t}(r.FauxObjectBase);t.FauxObjectCalendar=n});define("compatibility-layer/faux-objects/color-picker",["require","exports","tslib","aurelia-framework","./faux-object","./base-editor","aurelia-logging"],function(e,t,i,r,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});var o=s.getLogger("faux-color-picker");var l=function(e){i.__extends(t,e);function t(t,i,r,a){return e.call(this,t,i,r,a)||this}t.prototype[a.initializeFauxObject]=function(){var t=this;e.prototype[a.initializeFauxObject].call(this);var i=this.element.querySelector("input[type=color]");if(i){this.domEventsColor=new r.ElementEvents(i);this.domEventsColor.subscribe("change",function(){t.px_cm.notifyOwnerTyping(t);t.px_cm.notifyOwnerChanged(t);t.px_cm.processPostData(t)})}};t.prototype.getTextElement=function(){return this.element.querySelector("input[type=text]")};t.prototype[a.disposeFauxObject]=function(){e.prototype[a.disposeFauxObject].call(this);if(this.domEventsColor){this.domEventsColor.disposeAll()}};return t}(n.FauxObjectBaseEditor);t.FauxObjectColorPicker=l});define("compatibility-layer/faux-objects/datetime-edit",["require","exports","tslib","./faux-object","./base-editor","aurelia-framework","apps/enhance/services/control-helper","aurelia-logging"],function(e,t,i,r,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});var l=o.getLogger("date-time__faux-object");var u=function(e){i.__extends(t,e);function t(t,i,a,n){var s=e.call(this,t,i,a,n)||this;s.onValueChange=0;s.allowStrings=false;s.durationMode=false;s.allowCustomItems=false;s[r.configSetters].set("editMask",null);s[r.configSetters].set("displayMask",null);s[r.configSetters].set("nullText",null);s[r.configSetters].set("allowNull",null);s[r.configSetters].set("allowCustomItems",null);s[r.configSetters].set("minValue",null);s[r.configSetters].set("maxValue",null);s[r.configSetters].set("timeMode",null);return s}t.prototype[r.initializeFauxObject]=function(){var t=this;e.prototype[r.initializeFauxObject].call(this);var i=this.elemText=this.element.querySelector("input");this.domEvents=new n.ElementEvents(this.element);this.domEvents.subscribe("paste",function(){px_cm.notifyOwnerTyping(t)});this.domEvents.subscribe("usertyping",function(){px_cm.notifyOwnerTyping(t)});this.domEvents.subscribe("activated",function(){px_cm.notifyOwnerActivate(t)})};t.prototype.setValue=function(t){var i=typeof t==="string"?this._parseStringValue(t):t;if(this.allowStrings||i instanceof Date&&!isNaN(i.getTime())&&s.equals(this._ajustLimits(i),i)){e.prototype.setValue.call(this,i)}};t.prototype[r.disposeFauxObject]=function(){e.prototype[r.disposeFauxObject].call(this);this.domEvents.disposeAll()};t.prototype._parseStringValue=function(e){var t=this[r.configRef];var i=new Date;if(e===undefined||this.isNullValue(e)){if(t.allowNull)return undefined}else{if(t.timeMode||e.indexOf(":")>0){var a=Date.parse(e);if(!isNaN(a))i=new Date(a)}else{var n=e.split("/");if(n.length>=3){var s=parseInt(n[2]);var o=parseInt(n[0]);var l=parseInt(n[1]);if(!isNaN(s)&&!isNaN(o)&&!isNaN(l)){i=new Date(s,o-1,l);i.setFullYear(s,o-1,l)}}}}if(t.timeMode&&!isNaN(i.getTime())){i.setFullYear(t.minValue.getFullYear());i.setMonth(0);if(!this.durationMode)i.setDate(1)}if(t.allowCustomItems&&(i===undefined||isNaN(i.getTime())))return e;return i};t.prototype.isNullValue=function(e){var t=this[r.configRef];var i=String(e);if(e===undefined||i==="")return true;if(t.allowNull&&i===t.nullText)return true;return false};t.prototype._ajustLimits=function(e){var t=this[r.configRef];if(!t.timeMode&&!this.allowCustomItems&&e!=null&&!isNaN(e.getTime())){var i=e.getTime();var a=void 0;var n=void 0;if(t.minValue!=null)a=t.minValue.getTime();if(t.maxValue!=null)n=t.maxValue.getTime();if(a!==undefined&&i<a){e=new Date(a)}if(n!==undefined&&i>n){e=new Date(n)}}return e};return t}(a.FauxObjectBaseEditor);t.FauxObjectDatetimeEdit=u});define("compatibility-layer/faux-objects/faux-object",["require","exports","tslib","aurelia-logging","aurelia-pal"],function(require,exports,tslib_1,aurelia_logging_1,aurelia_pal_1){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var logger=aurelia_logging_1.getLogger("faux-object");exports.initializeFauxObject=Symbol("initializeFauxObject");exports.disposeFauxObject=Symbol("disposeFauxObject");exports.configRef=Symbol("configRef");exports.configSetters=Symbol("propertySetters");exports.propertySetters=Symbol("propertySetters");var defaultCallbackProperties={hidden:false};var FauxObjectBase=function(){function e(t,i,r){var a=this;this.element=t;this.screenValues=r;this.hidden=false;if(!i.id){logger.error("config without id");throw"wrong config"}var n=i.id.search(/[a-zA-Z0-9]+/);this[exports.configRef]=i;this.ID=i.id;i.name=this.name=i.id.substr(0,n)+i.id.substr(n).replace(/_/g,"$");this.px_context=px_context;this.tabIndex=this[exports.configRef].tabIndex;var s=2;if(i.propsTemplate)this.__className=i.propsTemplate.substring(s);this.sourceID=t.getAttribute("source-id");this[exports.propertySetters]=new Map([["hidden",function(e){return a.setHidden(e)}]]);this[exports.configSetters]=new Map([["hidden",null]]);var o=this.getExternalProps();this.events=new FauxObjectEventsList(this,[e.initEventName],o?o.clientEvents:null)}Object.defineProperty(e.prototype,"px_cm",{get:function(){return px_cm},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"px",{get:function(){return this.px_context.px},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"px_all",{get:function(){return this.px_context.px_all},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"px_callback",{get:function(){return this.px_context.px_callback},enumerable:true,configurable:true});e.prototype.getTemplateProps=function(){return window[this[exports.configRef].propsTemplate]};e.prototype.getExternalProps=function(){var e=this.sourceID?this.sourceID:this.ID;var t=window["_"+e];return t?t:{}};e.prototype.fireEvent=function(e,t,i){if(t===void 0){t=null}if(i===void 0){i=null}return this.events.fireEvent(e,t,i)};e.prototype[exports.initializeFauxObject]=function(){var t=tslib_1.__assign({},this.getTemplateProps(),this.getExternalProps());this.readProperties(this,t);this.copyPropertiesToConfig(t);px_context.px_all[this.ID]=this;var i=this.ID.split("_").pop();if(i)px_context.px_alls[i]=this;if(this.bindingContainer)px_cm.notifyOwnerCreated(this);if(this.tabIndex>=0)this.px_cm.tabIndexer.push(this);this.fireEvent(e.initEventName)};e.prototype[exports.disposeFauxObject]=function(){return};e.prototype.setObjectRef=function(e){e.object=this};e.prototype.setHidden=function(e){this.setVisible(!e)};e.prototype.setVisible=function(e){this.hidden=this[exports.configRef].hidden=!e};e.prototype.getVisible=function(){return!this.hidden};e.prototype.getDefaultCallbackProps=function(){return defaultCallbackProperties};e.prototype.setProperties=function(e){var t;var i=tslib_1.__assign({},this.getDefaultCallbackProps(),e);var r=this[exports.propertySetters];var a=this[exports.configRef];for(var n in i){var s=r.get(n);if(s){s(i[n])}else{var o=(t={},t[n]=i[n],t);Object.assign(this,o);if(this[exports.configSetters].has(n))Object.assign(a,o)}}};e.prototype.readProperties=function(e,t){var i,r;for(var a in t){var n=e[a];var s=t[a];var o=(i={},i[a]=s,i);if(n!=null&&typeof n==="object"){if(n instanceof Date){o=(r={},r[a]=new Date(Date.parse(s)),r);Object.assign(e,o)}else if(n instanceof Array){Object.assign(e,o)}else this.readProperties(n,s)}else Object.assign(e,o)}};e.prototype.copyPropertiesToConfig=function(e){var t;var i=this[exports.configRef];for(var r in e){if(!this[exports.configSetters].has(r))continue;var a=this[exports.configSetters].get(r);if(a){a(e[r])}else{Object.assign(i,(t={},t[r]=e[r],t))}}};e.initEventName="initialize";return e}();exports.FauxObjectBase=FauxObjectBase;var FauxObjectEventsList=function(){function FauxObjectEventsList(e,t,i){this.owner=e;this.events=new Object;this.handlers=new Object;this.count=0;this.appendEvents(t,i)}FauxObjectEventsList.prototype.appendEvents=function(events,handlers){if(events==null)return;for(var _i=0,events_1=events;_i<events_1.length;_i++){var name_1=events_1[_i];this.events[name_1]=this.count++}if(handlers==null)return;for(var hn in handlers){if(this.events.hasOwnProperty(hn)){var hlist=handlers[hn].startsWith("(")?[handlers[hn]]:handlers[hn].split(",");for(var _a=0,hlist_1=hlist;_a<hlist_1.length;_a++){var handler=hlist_1[_a];var hf=void 0;var win=aurelia_pal_1.PLATFORM.global;try{hf=win[handler]}catch(e){}try{hf=eval(handler)}catch(e){}if(hf)this.addEventHandler(hn,hf)}}}};FauxObjectEventsList.prototype.addEventHandler=function(e,t){var i=this.events[e];if(i==null||i<0)return;var r=this.handlers[i];if(r==null)r=this.handlers[i]=[];for(var a=0;a<=r.length;a++){if(r[a]==null){r[a]=new Object;r[a].func=t;break}else if(r[a].func===t)break}};FauxObjectEventsList.prototype.removeEventHandler=function(e,t){var i=this.events[e];if(i==null||i<0||i>=this.count)return;var r=this.handlers[i];if(r==null)return;for(var a in r){if(r[a]!=null&&r[a].func===t){delete r[a];r[a]=null;return}}};FauxObjectEventsList.prototype.fireEvent=function(e,t,i){var r=this.events[e];var a=this.initializeEvent(r,t,i);var n=this.handlers[r];var s=n==null?0:n.length;if(s===0)return false;var o=false;try{while(s-- >0){if(n[s]==null)continue;n[s].func(this.owner,a);if(a.cancel)o=true}}catch(e){}return o};FauxObjectEventsList.prototype.initializeEvent=function(e,t,i){this.eventArgs=new Object;this.eventArgs.event=t;this.eventArgs.id=e;this.eventArgs.srcElement=this.owner.element;this.eventArgs.srcArgs=i;if(i!=null)for(var r in i)this.eventArgs[r]=i[r];return this.eventArgs};return FauxObjectEventsList}();exports.FauxObjectEventsList=FauxObjectEventsList;var CallbackSettings=function(){function e(){this.enabled=true;this.activeBehavior=false;this.suppressOnReload=false;this.fromUIOnly=false;this.behavior=new CallbackCommand}return e}();exports.CallbackSettings=CallbackSettings;var CallbackCommand=function(){function e(){this.blockPage=false;this.repaintControls=0;this.commitChanges=false;this.postData=1;this.postDataControls=true;this.closePopup=false;this.hideText=false;this.optimizePostData=true;this.popupCheckSave=true;this.showProcessInfo=false}return e}();exports.CallbackCommand=CallbackCommand});define("compatibility-layer/faux-objects/number-editor",["require","exports","tslib","./text-editor","./faux-object"],function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(e){i.__extends(t,e);function t(t,i,r,n){var s=e.call(this,t,i,r,n)||this;s[a.configSetters].set("decimals",null);s[a.configSetters].set("minValue",null);s[a.configSetters].set("maxValue",null);s[a.configSetters].set("valueType",null);s[a.configSetters].set("editFormat",null);s[a.configSetters].set("displayFormat",null);return s}return t}(r.FauxObjectTextEditor);t.FauxObjectNumberEditor=n});define("compatibility-layer/faux-objects/text-editor",["require","exports","tslib","./faux-object","./base-editor","aurelia-pal"],function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var s={defaultLocale:"",language:"",localizationInfo:null};var o=function(e){i.__extends(t,e);function t(t,i,a,n){var s=e.call(this,t,i,a,n)||this;s.onValueChange=0;s.autoCallBack=new r.CallbackSettings;s.linkCommand=new r.CallbackSettings;s[r.configSetters].set("selectOnFocus",null);s[r.configSetters].set("allowNull",null);s[r.configSetters].set("nullText",null);s[r.configSetters].set("required",null);s[r.configSetters].set("asciiCharSet",null);s[r.configSetters].set("validateExp",null);return s}t.prototype[r.initializeFauxObject]=function(){var t=this;e.prototype[r.initializeFauxObject].call(this);this.defaultLocale=null;this.px_cm.registerRequiresOnLoad(this,this.ID);this.px_cm.registerAutoSize(this,this.getExternalProps());this.wrapLanguage();var i=new MutationObserver(function(e){t.onMutationCallback(e)});i.observe(this.element,{childList:true,subtree:true});this.domEventsElem.subscribe("click",function(e){var i=e.target;if(i&&i.tagName==="A")t.px_callback.exec(t,t.linkCommand)})};t.prototype[r.disposeFauxObject]=function(){e.prototype[r.disposeFauxObject].call(this)};t.prototype.onMutationCallback=function(e){var t=false;for(var i=0,r=e;i<r.length;i++){var a=r[i];if(a.type==="childList"){if(a.addedNodes.length>0||a.removedNodes.length>0){t=true;break}}}if(t)this.saveTextElementRef()};t.prototype.getDefaultCallbackProps=function(){return i.__assign({},e.prototype.getDefaultCallbackProps.call(this),s)};t.prototype.getTextElement=function(){var e=this.element.querySelector("input");return e?e:this.element.querySelector("textarea")};t.prototype.onLoad=function(){if(this.syncStateWithCommand)this.px_cm.registerCommandExecutor(this)};t.prototype.setProperties=function(t){if(this.syncStateWithCommand)t.readOnly=this.getReadOnly();e.prototype.setProperties.call(this,t);this.wrapLanguage()};t.prototype.initInlineEditor=function(){var e=this.getTextElement();if(e.tagName==="TEXTAREA"){this.px.registerAutoSizedText(e)}};t.prototype.commandStateCallback=function(e){this.setReadOnly(!e.getEnabled())};t.prototype.setVisible=function(t){if(!!t!==this.getVisible()){var i=t?"":"none";if(this.boundImage)this.boundImage.style.display=i;if(this.labelID){var r=this.px.elemByID(this.labelID);if(r)r.style.display=i}var a=this.element.nextElementSibling;if(a&&a.getAttribute("data-lang")==="indi"){a.style.display=i}}e.prototype.setVisible.call(this,t)};t.prototype.setReadOnly=function(t){e.prototype.setReadOnly.call(this,t);this.wrapLanguage()};t.prototype.getPositioning=function(e){return n.PLATFORM.global.getComputedStyle(e).position};t.prototype.wrapLanguage=function(e){if(e===void 0){e=null}var t=e||this.language||this.defaultLocale;if(!!t){if(this.elemLanguage&&this.elemLanguage.parentNode){this.elemLanguage.innerHTML=t;this.elemLanguage.style.display=this.getReadOnly()?"none":"";return}var i=this.elemText&&this.elemText.nextElementSibling;var r=this.elemText&&this.elemText.parentNode;if(r){this.elemLanguage=n.PLATFORM.global.document.createElement("a");this.elemLanguage.className="langindi2";this.elemLanguage.innerHTML=t;this.elemLanguage.href="javascript:void 0";this.elemLanguage.style.display=this.getReadOnly()?"none":"";var a=this.getPositioning(r);if(a==="static")r.style.position="relative";this.elemLanguage.setAttribute("style","position:absolute;top:2px; /* background-color: rgba(255,255,255,0.8);*/ ");this.elemLanguage.style[this.px.isRTL()?"left":"right"]="-30px";r.insertBefore(this.elemLanguage,i);this.px.addEventHandler(this.elemLanguage,"click",this.localeEditor.bind(this))}}};t.prototype.localeEditor=function(e){var t=this.px_all[this.bindingContainer];if(t.__className==="PXGrid"){t.localizedInlineEditor=this;if(t.activeCell.language)this.px_cm.showLocalizePopup(t.dataSourceID,t.dataMember,t.activeCell.column.getKey(),t,this.getValue(),t.activeCell.language)}else if(t&&this.language){if(!this.getReadOnly()){this.px_cm.showLocalizePopup(t.dataSourceID,t.dataMember,this.dataField,this,this.getValue(),this.language)}}else if(this.localizationInfo){var i=this.localizationInfo.split(";");this.px_cm.showLocalizePopup(i[0],i[1],i[2],this,this.getValue(),this.language)}e.preventDefault();e.stopPropagation();return false};t.prototype.localeUpdated=function(e){if(!e)return;var t=e.split(";");if(t.length>1){this.language=t[0];this.setValue(t[1])}};t.prototype.adjustInline=function(e){this.wrapLanguage(e);if(this.elemLanguage){this.elemLanguage.style.display="";var t=this.px.isRTL()?["multiLangRTL"]:["multiLang"];if(this.elemText)this.px.appendCss(this.elemText,t,true);var i=this.getPositioning(this.elemLanguage.parentNode);if((i==="absolute"||i==="relative")&&this.elemText!=null){var r=window.getComputedStyle(this.elemText);var a=6;var n=23;var s=this.px.isRTL()?(this.elemText.offsetLeft||0)+a:(this.elemText.offsetLeft||0)+parseInt(r.width,10)-n;this.elemLanguage.style.right="";this.elemLanguage.style.left=s+"px";this.elemLanguage.style.top=this.elemText.offsetTop+1+"px";if(this.elemText.style.zIndex)this.elemLanguage.style.zIndex=String(parseInt(this.elemText.style.zIndex)+1)}}};t.prototype.hideInline=function(){if(this.elemLanguage){this.elemLanguage.style.display="none";if(this.elemText)this.px.excludeCss(this.elemText,["multiLang","multiLangRTL"],true)}};return t}(a.FauxObjectBaseEditor);t.FauxObjectTextEditor=o});define("compatibility-layer/faux-screen",["require","exports","tslib","aurelia-framework","./faux-objects/faux-object","./faux-object-factory"],function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var s=function(){function e(e,t){this.element=e;this.bindingEngine=t}e.prototype.bind=function(e){e.elements[this.config.id]=this.config;this.values=e.values};e.prototype.attached=function(){var e=n.getFauxObject(this.element,this.config,this.values,this.bindingEngine);var t=this.element;t.object=e;e[a.initializeFauxObject]()};e.prototype.detached=function(){var e=this.element;e.object[a.disposeFauxObject]()};i.__decorate([r.bindable({defaultBindingMode:r.bindingMode.oneTime,primaryProperty:true}),i.__metadata("design:type",Object)],e.prototype,"config",void 0);e=i.__decorate([r.autoinject,r.customAttribute("faux-screen"),i.__metadata("design:paramtypes",[Element,r.BindingEngine])],e);return e}();t.FauxScreenCustomAttribute=s});define("elements/qp-loader-indicator",["require","exports","tslib","aurelia-framework"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(){}Object.defineProperty(e.prototype,"loadingClass",{get:function(){return this.loadingState===true?"loading":this.loadingState?this.loadingState:"in-sync"},enumerable:true,configurable:true});i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"loadingState",void 0);i.__decorate([r.computedFrom("loadingState"),i.__metadata("design:type",Object),i.__metadata("design:paramtypes",[])],e.prototype,"loadingClass",null);return e}();t.QpLoaderIndicatorCustomElement=a});define("text!elements/qp-loader-indicator.css",[],function(){return".loader-indicator-img {\n    color:#999999;\n    color:var(#999999, --primary-color);\n}\n\n.loader-indicator-img .progress {\n  stroke-width: 10;\n  stroke: currentColor;\n  stroke-linecap: square;  \n  -webkit-animation: dash 2.5s infinite;  \n          animation: dash 2.5s infinite;\n}\n\n\n@-webkit-keyframes dash {\n  0% {\n    stroke-dasharray: 0, 250;\n    stroke-dashoffset: 0;\n  }\n\n  25% {\n    stroke-dasharray: 250, 0;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 0, 250;\n    stroke-dashoffset: -250;\n  }\n\n  75% {\n    stroke-dasharray: 250, 0;\n    stroke-dashoffset: 0;\n  }\n\n  100% {\n    stroke-dasharray: 0, 250;\n    stroke-dashoffset: 0;\n  }\n}\n\n\n@keyframes dash {\n  0% {\n    stroke-dasharray: 0, 250;\n    stroke-dashoffset: 0;\n  }\n\n  25% {\n    stroke-dasharray: 250, 0;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 0, 250;\n    stroke-dashoffset: -250;\n  }\n\n  75% {\n    stroke-dasharray: 250, 0;\n    stroke-dashoffset: 0;\n  }\n\n  100% {\n    stroke-dasharray: 0, 250;\n    stroke-dashoffset: 0;\n  }\n}\n"});define("text!elements/qp-loader-indicator.html",[],function(){return'<template class="qp-loader-indicator" class.bind="loadingClass"><require from="./qp-loader-indicator.css"></require><template if.bind="loadingState==\'in-sync\'"><template replaceable part="in-sync"></template></template><template if.bind="loadingState==\'will-load\'"><template replaceable part="will-load"></template></template><template if.bind="loadingState==\'loading\'"><template replaceable part="loading"><svg class="loader-indicator-img" height="3px" width="100%" viewBox="80 0 235 10" preserveAspectRatio="none"><path class="progress" stroke-width="4" d="M70,10 l250,0"></path></svg></template></template></template>'});define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default={debug:false,testing:false}});define("plugins/enhance-n-watch/index",["require","exports","tslib","./mutation-enhancer"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function a(e){e.aurelia.enhanceAndWatch=function(t,a){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(i){e.aurelia.__me=new r.MutationEnhancer(e.aurelia,t);e.aurelia.__me.watch(a);return[2,this.enhance(t,a)]})})};e.aurelia.stopWatch=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(t){if(e.aurelia.__me instanceof r.MutationEnhancer){e.aurelia.__me.unwatch()}return[2]})})}}t.configure=a});define("plugins/enhance-n-watch/mutation-enhancer",["require","exports","aurelia-framework","aurelia-logging"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r.getLogger("enhance-watch");var n=function(){function e(e,t){this.au=e;this.bindingContext=t;this.enhanceSelector="";this.container=e.container;this.engine=e.container.get(i.TemplatingEngine)}e.prototype.watch=function(e){var t=this;this.enhanceSelector=Object.keys(this.au.resources.elements).filter(function(e){return["compose","router-view"].indexOf(e)===-1}).map(function(e){return e.toLowerCase()}).join(",");this.observer=new MutationObserver(function(e){t.onMutationcallback(e)});this.observer.observe(i.PLATFORM.global.document,{childList:true,subtree:true})};e.prototype.unwatch=function(){if(this.observer){this.observer.disconnect()}};e.prototype.onMutationcallback=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t];if(r.type==="childList"){for(var n=0;n<r.addedNodes.length;n++){var s=r.addedNodes[n];if(s.nodeType!==Node.ELEMENT_NODE){continue}var o=void 0;if(this.au.resources.getElement(s.nodeName.toLowerCase())){o=[s]}else{o=s.querySelectorAll(this.enhanceSelector)}for(var l=0;l<o.length;l++){var u=o[l];if(u.getAttribute("au-target-id")){a.warn("node already enchanced",u);u.au.controller.attached()}else{this.engine.enhance({element:u,container:this.container,resources:this.au.resources,bindingContext:this.bindingContext})}}}for(var n=0;n<r.removedNodes.length;n++){var s=r.removedNodes[n];if(s.nodeType!==Node.ELEMENT_NODE){continue}var o=void 0;if(this.au.resources.getElement(s.nodeName.toLowerCase())){o=[s]}else{o=s.querySelectorAll(this.enhanceSelector)}for(var l=0;l<o.length;l++){var u=o[l];if(!u.au){a.warn("no au-target-id on removed node",u)}if(u.getAttribute("au-target-id")){u.au.controller.detached()}}}}}};return e}();t.MutationEnhancer=n});define("plugins/glue/glue-to-custom-attribute",["require","exports","tslib","aurelia-templating","aurelia-logging","aurelia-pal","aurelia-event-aggregator","./index"],function(e,t,i,r,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});var l=a.getLogger("glue-to-attribute");var u=function(){function e(e,t){this.ea=t;this.element=e}e.prototype.bind=function(){if(!(this.target instanceof HTMLElement)){l.warn("target element is invalid",this.target)}};e.prototype.attached=function(){var e=this;if(this.target){this.coordinateSystemSubscription=this.ea.subscribe(o.COORDINATE_SYSTEM_CHANGED_EVENT_NAME,function(t){e.reconSquad();e.glueNow()});this.reconSquad();this.initGlue();this.glueNow()}};e.prototype.initGlue=function(){var e=this.element.style;var t=e.maxWidth||e.width;var i=e.maxHeight||e.height;var r=this.element.getBoundingClientRect(),a=r.width,n=r.height;this.maxWidth=t&&parseInt(t)||a;this.maxHeight=i&&parseInt(i)||n;var s=this.glueRect.bottom+this.maxHeight<this.docRect.bottom;this.direction=s?"down":"up"};e.prototype.reconSquad=function(){this.docRect=n.PLATFORM.global.document.documentElement.getBoundingClientRect();this.glueRect=this.target.getBoundingClientRect()};e.prototype.detached=function(){if(this.coordinateSystemSubscription){this.coordinateSystemSubscription.dispose();this.coordinateSystemSubscription=undefined}};e.prototype.glueNow=function(){var e=this.element;var t=e.getBoundingClientRect().width;var i;var r;var a;var n=this.glueRect.left+Math.min(this.maxWidth,t)>this.docRect.width;if(n){var s=Math.max(this.glueRect.right,this.docRect.right);r=s}else{r=this.glueRect.left}var o=e.style;if(this.direction==="up"){i=this.glueRect.top;a=n?"translate(-100%,-100%)":"translateY(-100%)"}else{i=this.glueRect.bottom;a=n?"translateX(-100%)":""}o.position="fixed";o.left=r+"px";o.top=i+"px";o.transform=a};i.__decorate([r.bindable({primaryProperty:true}),i.__metadata("design:type",Object)],e.prototype,"target",void 0);e=i.__decorate([r.customAttribute("glue-to"),i.__metadata("design:paramtypes",[Element,s.EventAggregator])],e);return e}();t.GlueToCustomAttribute=u});define("plugins/glue/index",["require","exports","aurelia-framework","./glue-to-custom-attribute","aurelia-event-aggregator"],function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.COORDINATE_SYSTEM_CHANGED_EVENT_NAME="absolute-positions-are-screwed";function n(e){e.globalResources([r.GlueToCustomAttribute]);var n=e.container.get(a.EventAggregator);e.postTask(function(){i.PLATFORM.global.document.addEventListener("scroll",function(e){s(e)},{capture:true,passive:true});i.PLATFORM.global.addEventListener("resize",function(e){s(e)},{passive:true})});function s(e){n.publish(t.COORDINATE_SYSTEM_CHANGED_EVENT_NAME,e)}}t.configure=n});